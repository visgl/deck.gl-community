"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[8720],{28453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>s});var r=a(96540);const o={},t=r.createContext(o);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),r.createElement(t.Provider,{value:n},e.children)}},40346:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});var r=a(90219),o=a(74848),t=a(28453);const l={},s="GraphLayer",i={},d=[{value:"Usage",id:"usage",level:2},{value:"Properties",id:"properties",level:2},{value:"Data sources",id:"data-sources",level:3},{value:"<code>data</code> (async, optional)",id:"data-async-optional",level:4},{value:"<code>graph</code> (<code>Graph</code>, optional, deprecated)",id:"graph-graph-optional-deprecated",level:4},{value:"<code>graphLoader</code> (function, optional)",id:"graphloader-function-optional",level:4},{value:"<code>engine</code> (<code>GraphEngine</code>, optional)",id:"engine-graphengine-optional",level:4},{value:"<code>layout</code> (<code>GraphLayout</code>, optional)",id:"layout-graphlayout-optional",level:4},{value:"Styling",id:"styling",level:3},{value:"<code>stylesheet</code> (<code>GraphLayerStylesheet</code>, optional)",id:"stylesheet-graphlayerstylesheet-optional",level:4},{value:"Interaction",id:"interaction",level:3},{value:"<code>nodeEvents</code> (object, optional)",id:"nodeevents-object-optional",level:4},{value:"<code>edgeEvents</code> (object, optional)",id:"edgeevents-object-optional",level:4},{value:"Layout lifecycle",id:"layout-lifecycle",level:3},{value:"<code>onLayoutStart</code> / <code>onLayoutChange</code> / <code>onLayoutDone</code> / <code>onLayoutError</code> (functions, optional)",id:"onlayoutstart--onlayoutchange--onlayoutdone--onlayouterror-functions-optional",level:4},{value:"<code>enableDragging</code> (boolean, optional)",id:"enabledragging-boolean-optional",level:4},{value:"Miscellaneous",id:"miscellaneous",level:3},{value:"<code>pickable</code> (boolean, optional)",id:"pickable-boolean-optional",level:4},{value:"<code>rankGrid</code> (boolean | object, optional)",id:"rankgrid-boolean--object-optional",level:4},{value:"Notes",id:"notes",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"graphlayer",children:"GraphLayer"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"GraphLayer"})," is a composite Deck.gl layer that renders graph nodes, edges, and\noptional decorators using the declarative ",(0,o.jsx)(n.a,{href:"/deck.gl-community/docs/modules/graph-layers/api-reference/styling/graph-stylesheet",children:"graph stylesheet"}),".\nIt orchestrates the ",(0,o.jsx)(n.code,{children:"GraphEngine"})," with layout, styling, and interaction state so\nthat graph applications can focus on supplying data and high-level behavior."]}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import {GraphLayer, JSONLoader, D3ForceLayout} from '@deck.gl-community/graph-layers';\n\nconst layer = new GraphLayer({\n  id: 'graph',\n  data: graphJson,\n  graphLoader: JSONLoader,\n  layout: new D3ForceLayout(),\n  stylesheet: {\n    nodes: [\n      {type: 'circle', radius: {attribute: 'degree', fallback: 6}},\n      {type: 'label', text: '@id', color: '#172B4D', offset: [0, 16]}\n    ],\n    edges: {\n      stroke: {attribute: 'isCritical', fallback: false, scale: value => (value ? '#F97316' : '#CBD5F5')},\n      strokeWidth: {default: 1, hover: 3},\n      decorators: [{type: 'arrow', size: 8}]\n    }\n  },\n  enableDragging: true\n});\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"GraphLayer"})," treats the ",(0,o.jsx)(n.code,{children:"data"})," prop as its single entry point. Provide a\n",(0,o.jsx)(n.code,{children:"GraphEngine"}),", a ",(0,o.jsx)(n.a,{href:"/deck.gl-community/docs/modules/graph-layers/api-reference/graph",children:(0,o.jsx)(n.code,{children:"Graph"})}),", or raw graph payloads (arrays of edges\nor ",(0,o.jsx)(n.code,{children:"{nodes, edges}"})," objects). When the layer receives new data it rebuilds the\ninternal ",(0,o.jsx)(n.code,{children:"GraphEngine"}),", re-runs the layout, and updates interactions\nautomatically. Supplying raw data requires a ",(0,o.jsx)(n.code,{children:"layout"})," so the layer can derive\npositions for you."]}),"\n",(0,o.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"GraphLayer"})," inherits all standard ",(0,o.jsx)(n.a,{href:"https://deck.gl/docs/api-reference/core/layer",children:"Deck.gl layer props"}),"\nand adds the graph-specific options below."]}),"\n",(0,o.jsx)(n.h3,{id:"data-sources",children:"Data sources"}),"\n",(0,o.jsxs)(n.h4,{id:"data-async-optional",children:[(0,o.jsx)(n.code,{children:"data"})," (async, optional)"]}),"\n",(0,o.jsx)(n.p,{children:"Unified graph input. Accepts:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["A ",(0,o.jsx)(n.code,{children:"GraphEngine"})," instance to reuse an existing engine."]}),"\n",(0,o.jsxs)(n.li,{children:["A ",(0,o.jsx)(n.a,{href:"/deck.gl-community/docs/modules/graph-layers/api-reference/graph",children:(0,o.jsx)(n.code,{children:"Graph"})})," instance to have the layer build its own engine."]}),"\n",(0,o.jsxs)(n.li,{children:["Raw graph payloads\u2014either arrays of edges or ",(0,o.jsx)(n.code,{children:"{nodes, edges}"})," objects. Strings\nand promises are resolved via Deck.gl's async prop system."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Provide ",(0,o.jsx)(n.code,{children:"layout"})," whenever you hand off raw data or a ",(0,o.jsx)(n.code,{children:"Graph"}),", otherwise the\nlayer cannot position nodes. Set ",(0,o.jsx)(n.code,{children:"data"})," to ",(0,o.jsx)(n.code,{children:"null"})," to skip rendering."]}),"\n",(0,o.jsxs)(n.h4,{id:"graph-graph-optional-deprecated",children:[(0,o.jsx)(n.code,{children:"graph"})," (",(0,o.jsx)(n.a,{href:"/deck.gl-community/docs/modules/graph-layers/api-reference/graph",children:(0,o.jsx)(n.code,{children:"Graph"})}),", optional, deprecated)"]}),"\n",(0,o.jsxs)(n.p,{children:["Legacy entry point for supplying a graph. Prefer the ",(0,o.jsx)(n.code,{children:"data"})," prop instead. When\nused, the layer still requires a ",(0,o.jsx)(n.code,{children:"layout"})," to build the internal engine. Future\nreleases will remove this prop."]}),"\n",(0,o.jsxs)(n.h4,{id:"graphloader-function-optional",children:[(0,o.jsx)(n.code,{children:"graphLoader"})," (function, optional)"]}),"\n",(0,o.jsxs)(n.p,{children:["Custom loader that converts raw ",(0,o.jsx)(n.code,{children:"data"})," into a ",(0,o.jsx)(n.code,{children:"Graph"}),". Defaults to the bundled\n",(0,o.jsx)(n.code,{children:"JSONLoader"}),", which accepts arrays of edges or ",(0,o.jsx)(n.code,{children:"{nodes, edges}"})," collections and\nautomatically synthesizes missing nodes. Graph instances are no longer\nnormalized by the loader\u2014pass them directly to ",(0,o.jsx)(n.code,{children:"data"}),"."]}),"\n",(0,o.jsxs)(n.h4,{id:"engine-graphengine-optional",children:[(0,o.jsx)(n.code,{children:"engine"})," (",(0,o.jsx)(n.code,{children:"GraphEngine"}),", optional)"]}),"\n",(0,o.jsxs)(n.p,{children:["Inject an existing engine to reuse layout state across renders. When omitted the\nlayer constructs a new engine from ",(0,o.jsx)(n.code,{children:"graph"})," or ",(0,o.jsx)(n.code,{children:"data"}),"."]}),"\n",(0,o.jsxs)(n.h4,{id:"layout-graphlayout-optional",children:[(0,o.jsx)(n.code,{children:"layout"})," (",(0,o.jsx)(n.a,{href:"/deck.gl-community/docs/modules/graph-layers/api-reference/layouts/graph-layout",children:(0,o.jsx)(n.code,{children:"GraphLayout"})}),", optional)"]}),"\n",(0,o.jsxs)(n.p,{children:["Layout algorithm used by the engine. Pass one of the bundled layouts such as\n",(0,o.jsx)(n.a,{href:"/deck.gl-community/docs/modules/graph-layers/api-reference/layouts/d3-force-layout",children:(0,o.jsx)(n.code,{children:"D3ForceLayout"})})," or implement a custom layout that\nconforms to the interface."]}),"\n",(0,o.jsx)(n.h3,{id:"styling",children:"Styling"}),"\n",(0,o.jsxs)(n.h4,{id:"stylesheet-graphlayerstylesheet-optional",children:[(0,o.jsx)(n.code,{children:"stylesheet"})," (",(0,o.jsx)(n.a,{href:"/deck.gl-community/docs/modules/graph-layers/api-reference/styling/graph-stylesheet",children:(0,o.jsx)(n.code,{children:"GraphLayerStylesheet"})}),", optional)"]}),"\n",(0,o.jsxs)(n.p,{children:["Declarative description of node and edge appearance. Supply ",(0,o.jsx)(n.code,{children:"nodes"})," as an array\nand ",(0,o.jsx)(n.code,{children:"edges"})," as a single object or array when stacking edge passes. The layer\nstill accepts the legacy ",(0,o.jsx)(n.code,{children:"nodeStyle"}),"/",(0,o.jsx)(n.code,{children:"edgeStyle"})," props but they are deprecated\nand forward to the stylesheet internally."]}),"\n",(0,o.jsx)(n.h3,{id:"interaction",children:"Interaction"}),"\n",(0,o.jsxs)(n.p,{children:["See the\n",(0,o.jsx)(n.a,{href:"/deck.gl-community/docs/modules/graph-layers/developer-guide/interactions",children:"interaction reference"})," for signatures and usage notes."]}),"\n",(0,o.jsxs)(n.h4,{id:"nodeevents-object-optional",children:[(0,o.jsx)(n.code,{children:"nodeEvents"})," (object, optional)"]}),"\n",(0,o.jsxs)(n.p,{children:["Register interaction callbacks for nodes. Supported keys are ",(0,o.jsx)(n.code,{children:"onMouseLeave"}),",\n",(0,o.jsx)(n.code,{children:"onHover"}),", ",(0,o.jsx)(n.code,{children:"onMouseEnter"}),", ",(0,o.jsx)(n.code,{children:"onClick"}),", and ",(0,o.jsx)(n.code,{children:"onDrag"}),"."]}),"\n",(0,o.jsxs)(n.h4,{id:"edgeevents-object-optional",children:[(0,o.jsx)(n.code,{children:"edgeEvents"})," (object, optional)"]}),"\n",(0,o.jsxs)(n.p,{children:["Interaction callbacks for edges. Supports ",(0,o.jsx)(n.code,{children:"onClick"})," and ",(0,o.jsx)(n.code,{children:"onHover"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"layout-lifecycle",children:"Layout lifecycle"}),"\n",(0,o.jsxs)(n.h4,{id:"onlayoutstart--onlayoutchange--onlayoutdone--onlayouterror-functions-optional",children:[(0,o.jsx)(n.code,{children:"onLayoutStart"})," / ",(0,o.jsx)(n.code,{children:"onLayoutChange"})," / ",(0,o.jsx)(n.code,{children:"onLayoutDone"})," / ",(0,o.jsx)(n.code,{children:"onLayoutError"})," (functions, optional)"]}),"\n",(0,o.jsxs)(n.p,{children:["Register callbacks that mirror the underlying layout lifecycle. Each handler\nreceives the ",(0,o.jsx)(n.a,{href:"/deck.gl-community/docs/modules/graph-layers/api-reference/layouts/graph-layout#graphlayouteventdetail",children:(0,o.jsx)(n.code,{children:"GraphLayoutEventDetail"})}),"\nobject emitted by the active engine. ",(0,o.jsx)(n.code,{children:"GraphLayer"})," wires these callbacks through\nto the active ",(0,o.jsx)(n.code,{children:"GraphEngine"})," so they run alongside the layer's internal state\nupdates (e.g. viewport fitting, loading indicators). Supply only the handlers\nyou need\u2014they are all optional."]}),"\n",(0,o.jsxs)(n.h4,{id:"enabledragging-boolean-optional",children:[(0,o.jsx)(n.code,{children:"enableDragging"})," (boolean, optional)"]}),"\n",(0,o.jsxs)(n.p,{children:["When ",(0,o.jsx)(n.code,{children:"true"}),", nodes can be repositioned by dragging. The interaction manager\nupdates the layout and stylesheet state automatically during drags."]}),"\n",(0,o.jsx)(n.h3,{id:"miscellaneous",children:"Miscellaneous"}),"\n",(0,o.jsxs)(n.h4,{id:"pickable-boolean-optional",children:[(0,o.jsx)(n.code,{children:"pickable"})," (boolean, optional)"]}),"\n",(0,o.jsxs)(n.p,{children:["Inherited from ",(0,o.jsx)(n.code,{children:"CompositeLayer"}),". Defaults to ",(0,o.jsx)(n.code,{children:"true"})," so nodes and edges respond to\nhover and click events. Disable if you only need a static rendering."]}),"\n",(0,o.jsxs)(n.h4,{id:"rankgrid-boolean--object-optional",children:[(0,o.jsx)(n.code,{children:"rankGrid"})," (boolean | object, optional)"]}),"\n",(0,o.jsxs)(n.p,{children:["Draw grid lines that align with ranked layers in the active layout. Pass ",(0,o.jsx)(n.code,{children:"true"}),"\nto enable the default configuration or supply an object to customize the\nbehavior:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"new GraphLayer({\n  id: 'dag',\n  layout: new D3DagLayout({layering: 'simplex'}),\n  rankGrid: {\n    enabled: true,\n    direction: 'horizontal',\n    rankAccessor: 'rank',\n    maxLines: 8,\n    gridProps: {\n      color: [148, 163, 184, 220],\n      labelOffset: [8, 0]\n    }\n  }\n});\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"GraphLayer"})," samples the layout engine for node positions, maps each rank to an\naveraged Y coordinate, and renders the overlay with the reusable ",(0,o.jsx)(n.code,{children:"GridLayer"}),".\nWhen multiple ranks collapse onto the same coordinate the layer redistributes\nthem across the current viewport bounds so the lines stay readable. The\nconfiguration supports:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"enabled"})," (default ",(0,o.jsx)(n.code,{children:"true"}),") \u2013 toggle the overlay without changing other\nsettings."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"direction"})," (",(0,o.jsx)(n.code,{children:"'horizontal' | 'vertical'"}),", default ",(0,o.jsx)(n.code,{children:"'horizontal'"}),") \u2013 orient the\ngrid lines to match the DAG orientation."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"rankAccessor"})," (string | function) \u2013 read the rank field from each node. By\ndefault the accessor falls back to the ",(0,o.jsx)(n.code,{children:"srank"})," property computed by the DAG\nlayout."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"labelAccessor"})," (string | function) \u2013 override the text shown next to each\ngrid line."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"maxLines"})," (number, default ",(0,o.jsx)(n.code,{children:"8"}),") \u2013 limit how many ranks are rendered."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"gridProps"})," \u2013 forwarded to the underlying ",(0,o.jsx)(n.code,{children:"GridLayer"})," so you can adjust line\ncolor, width, label offsets, and similar presentation details."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The layer resolves the stylesheet through the ",(0,o.jsx)(n.code,{children:"GraphStylesheetEngine"})," (also exported as\n",(0,o.jsx)(n.code,{children:"GraphStyleEngine"})," for backward compatibility), which\ncoalesces attribute bindings, selectors, and triggers before delegating to the\nunderlying Deck.gl sublayers."]}),"\n",(0,o.jsxs)(n.li,{children:["Reusing the same ",(0,o.jsx)(n.code,{children:"GraphEngine"})," instance across renders preserves layout state\nand interaction history. Provide the ",(0,o.jsx)(n.code,{children:"engine"})," prop to opt into that workflow."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},90219:e=>{e.exports=JSON.parse('{"id":"modules/graph-layers/api-reference/layers/graph-layer","title":"GraphLayer","description":"GraphLayer is a composite Deck.gl layer that renders graph nodes, edges, and","source":"@site/../docs/modules/graph-layers/api-reference/layers/graph-layer.md","sourceDirName":"modules/graph-layers/api-reference/layers","slug":"/modules/graph-layers/api-reference/layers/graph-layer","permalink":"/deck.gl-community/docs/modules/graph-layers/api-reference/layers/graph-layer","draft":false,"unlisted":false,"editUrl":"https://github.com/visgl/deck.gl-community/tree/master/website/../docs/modules/graph-layers/api-reference/layers/graph-layer.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/deck.gl-community/docs/modules/graph-layers/"},"next":{"title":"EdgeLayer","permalink":"/deck.gl-community/docs/modules/graph-layers/api-reference/layers/edge-layer"}}')}}]);