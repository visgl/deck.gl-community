"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[3441],{13969:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(3459),o=n(34467),s=n(26323),r=n(95282);const a=.75,l=[];class c extends o.A{getShaders(){const e=super.getShaders();return{...e,modules:[...e.modules,s.J],fs:r.A}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(e,{index:t,target:n})=>this.encodePickingColor(t,n)}})}updateState(e){super.updateState(e);const{props:t,oldProps:n}=e;let{outlineColor:o}=t;o!==n.outlineColor&&(o=o.map(e=>e/255),o[3]=Number.isFinite(o[3])?o[3]:1,this.setState({outlineColor:o})),!t.sdf&&t.outlineWidth&&i.A.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(e){const{sdf:t,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state,s=i?Math.max(n,a*(1-i)):-1,r=this.state.model,l={buffer:a,outlineBuffer:s,gamma:n,enabled:Boolean(t),outlineColor:o};if(r.shaderInputs.setProps({sdf:l}),super.draw(e),t&&i){const{iconManager:e}=this.state;e.getTexture()&&(r.shaderInputs.setProps({sdf:{...l,outlineBuffer:a}}),r.draw(this.context.renderPass))}}getInstanceOffset(e){return e?Array.from(e).flatMap(e=>super.getInstanceOffset(e)):l}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(e=>super.getInstanceIconFrame(e)):l}}c.defaultProps={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}},c.layerName="MultiIconLayer";const d=c},13992:(e,t,n)=>{n.d(t,{A:()=>i});const i=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\nin vec2 positions;\nin vec3 vertexPositions;\nin vec3 nextVertexPositions;\nin vec3 vertexPositions64Low;\nin vec3 nextVertexPositions64Low;\nin float elevations;\nin float instanceVertexValid;\n${n(58990).A}\nvoid main(void) {\nif(instanceVertexValid < 0.5){\ngl_Position = vec4(0.);\nreturn;\n}\nPolygonProps props;\nvec3 pos;\nvec3 pos64Low;\nvec3 nextPos;\nvec3 nextPos64Low;\n#if RING_WINDING_ORDER_CW == 1\npos = vertexPositions;\npos64Low = vertexPositions64Low;\nnextPos = nextVertexPositions;\nnextPos64Low = nextVertexPositions64Low;\n#else\npos = nextVertexPositions;\npos64Low = nextVertexPositions64Low;\nnextPos = vertexPositions;\nnextPos64Low = vertexPositions64Low;\n#endif\nprops.positions = mix(pos, nextPos, positions.x);\nprops.positions64Low = mix(pos64Low, nextPos64Low, positions.x);\nprops.normal = vec3(\npos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),\nnextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),\n0.0);\nprops.elevations = elevations * positions.y;\ncalculatePosition(props);\n}\n`},23579:(e,t,n)=>{n.d(t,{F:()=>o});const i="uniform textBackgroundUniforms {\n  bool billboard;\n  float sizeScale;\n  float sizeMinPixels;\n  float sizeMaxPixels;\n  vec4 borderRadius;\n  vec4 padding;\n  highp int sizeUnits;\n  bool stroked;\n} textBackground;\n",o={name:"textBackground",vs:i,fs:i,uniformTypes:{billboard:"f32",sizeScale:"f32",sizeMinPixels:"f32",sizeMaxPixels:"f32",borderRadius:"vec4<f32>",padding:"vec4<f32>",sizeUnits:"i32",stroked:"f32"}}},25136:(e,t,n)=>{n.d(t,{A:()=>i});const i="#version 300 es\n#define SHADER_NAME text-background-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceRects;\nin float instanceSizes;\nin float instanceAngles;\nin vec2 instancePixelOffsets;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout float vLineWidth;\nout vec2 uv;\nout vec2 dimensions;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = radians(angle);\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvLineWidth = instanceLineWidths;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * textBackground.sizeScale, textBackground.sizeUnits),\ntextBackground.sizeMinPixels, textBackground.sizeMaxPixels\n);\ndimensions = instanceRects.zw * sizePixels + textBackground.padding.xy + textBackground.padding.zw;\nvec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-textBackground.padding.xy, textBackground.padding.zw, positions);\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\npixelOffset += instancePixelOffsets;\npixelOffset.y *= -1.0;\nif (textBackground.billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n"},26323:(e,t,n)=>{n.d(t,{J:()=>o});const i="uniform sdfUniforms {\n  float gamma;\n  bool enabled;\n  float buffer;\n  float outlineBuffer;\n  vec4 outlineColor;\n} sdf;\n",o={name:"sdf",vs:i,fs:i,uniformTypes:{gamma:"f32",enabled:"f32",buffer:"f32",outlineBuffer:"f32",outlineColor:"vec4<f32>"}}},29469:(e,t,n)=>{function i(e,t,n=2){const i=t&&t.length,s=i?t[0]*n:e.length;let a=o(e,0,s,n,!0);const l=[];if(!a||a.next===a.prev)return l;let c,d,g;if(i&&(a=function(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const n=o(e,t[r]*i,r<a-1?t[r+1]*i:e.length,i,!1);n===n.next&&(n.steiner=!0),s.push(h(n))}s.sort(u);for(let o=0;o<s.length;o++)n=f(s[o],n);return n}(e,t,a,n)),e.length>80*n){c=e[0],d=e[1];let t=c,i=d;for(let o=n;o<s;o+=n){const n=e[o],s=e[o+1];n<c&&(c=n),s<d&&(d=s),n>t&&(t=n),s>i&&(i=s)}g=Math.max(t-c,i-d),g=0!==g?32767/g:0}return r(a,l,n,c,d,g,0),l}function o(e,t,n,i,o){let s;if(o===I(e,t,n,i)>0)for(let r=t;r<n;r+=i)s=S(r/i|0,e[r],e[r+1],s);else for(let r=n-i;r>=t;r-=i)s=S(r/i|0,e[r],e[r+1],s);return s&&_(s,s.next)&&(w(s),s=s.next),s}function s(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!_(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(w(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function r(e,t,n,i,o,u,f){if(!e)return;!f&&u&&function(e,t,n,i){let o=e;do{0===o.z&&(o.z=p(o.x,o.y,t,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){let t,n=1;do{let i,o=e;e=null;let s=null;for(t=0;o;){t++;let r=o,a=0;for(let e=0;e<n&&(a++,r=r.nextZ,r);e++);let l=n;for(;a>0||l>0&&r;)0!==a&&(0===l||!r||o.z<=r.z)?(i=o,o=o.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;o=r}s.nextZ=null,n*=2}while(t>1)}(o)}(e,i,o,u);let g=e;for(;e.prev!==e.next;){const p=e.prev,h=e.next;if(u?l(e,i,o,u):a(e))t.push(p.i,e.i,h.i),w(e),e=h.next,g=h.next;else if((e=h)===g){f?1===f?r(e=c(s(e),t),t,n,i,o,u,2):2===f&&d(e,t,n,i,o,u):r(s(e),t,n,i,o,u,1);break}}}function a(e){const t=e.prev,n=e,i=e.next;if(m(t,n,i)>=0)return!1;const o=t.x,s=n.x,r=i.x,a=t.y,l=n.y,c=i.y,d=Math.min(o,s,r),u=Math.min(a,l,c),f=Math.max(o,s,r),g=Math.max(a,l,c);let p=i.next;for(;p!==t;){if(p.x>=d&&p.x<=f&&p.y>=u&&p.y<=g&&y(o,a,s,l,r,c,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function l(e,t,n,i){const o=e.prev,s=e,r=e.next;if(m(o,s,r)>=0)return!1;const a=o.x,l=s.x,c=r.x,d=o.y,u=s.y,f=r.y,g=Math.min(a,l,c),h=Math.min(d,u,f),x=Math.max(a,l,c),v=Math.max(d,u,f),_=p(g,h,t,n,i),C=p(x,v,t,n,i);let P=e.prevZ,b=e.nextZ;for(;P&&P.z>=_&&b&&b.z<=C;){if(P.x>=g&&P.x<=x&&P.y>=h&&P.y<=v&&P!==o&&P!==r&&y(a,d,l,u,c,f,P.x,P.y)&&m(P.prev,P,P.next)>=0)return!1;if(P=P.prevZ,b.x>=g&&b.x<=x&&b.y>=h&&b.y<=v&&b!==o&&b!==r&&y(a,d,l,u,c,f,b.x,b.y)&&m(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;P&&P.z>=_;){if(P.x>=g&&P.x<=x&&P.y>=h&&P.y<=v&&P!==o&&P!==r&&y(a,d,l,u,c,f,P.x,P.y)&&m(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;b&&b.z<=C;){if(b.x>=g&&b.x<=x&&b.y>=h&&b.y<=v&&b!==o&&b!==r&&y(a,d,l,u,c,f,b.x,b.y)&&m(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function c(e,t){let n=e;do{const i=n.prev,o=n.next.next;!_(i,o)&&C(i,n,n.next,o)&&z(i,o)&&z(o,i)&&(t.push(i.i,n.i,o.i),w(n),w(n.next),n=e=o),n=n.next}while(n!==e);return s(n)}function d(e,t,n,i,o,a){let l=e;do{let e=l.next.next;for(;e!==l.prev;){if(l.i!==e.i&&v(l,e)){let c=A(l,e);return l=s(l,l.next),c=s(c,c.next),r(l,t,n,i,o,a,0),void r(c,t,n,i,o,a,0)}e=e.next}l=l.next}while(l!==e)}function u(e,t){let n=e.x-t.x;if(0===n&&(n=e.y-t.y,0===n)){n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)}return n}function f(e,t){const n=function(e,t){let n=t;const i=e.x,o=e.y;let s,r=-1/0;if(_(e,n))return n;do{if(_(e,n.next))return n.next;if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const e=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>r&&(r=e,s=n.x<n.next.x?n:n.next,e===i))return s}n=n.next}while(n!==t);if(!s)return null;const a=s,l=s.x,c=s.y;let d=1/0;n=s;do{if(i>=n.x&&n.x>=l&&i!==n.x&&x(o<c?i:r,o,l,c,o<c?r:i,o,n.x,n.y)){const t=Math.abs(o-n.y)/(i-n.x);z(n,e)&&(t<d||t===d&&(n.x>s.x||n.x===s.x&&g(s,n)))&&(s=n,d=t)}n=n.next}while(n!==a);return s}(e,t);if(!n)return t;const i=A(n,e);return s(i,i.next),s(n,n.next)}function g(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function p(e,t,n,i,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function h(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function x(e,t,n,i,o,s,r,a){return(o-r)*(t-a)>=(e-r)*(s-a)&&(e-r)*(i-a)>=(n-r)*(t-a)&&(n-r)*(s-a)>=(o-r)*(i-a)}function y(e,t,n,i,o,s,r,a){return!(e===r&&t===a)&&x(e,t,n,i,o,s,r,a)}function v(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&C(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){let n=e,i=!1;const o=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&o<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||_(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function C(e,t,n,i){const o=b(m(e,t,n)),s=b(m(e,t,i)),r=b(m(n,i,e)),a=b(m(n,i,t));return o!==s&&r!==a||(!(0!==o||!P(e,n,t))||(!(0!==s||!P(e,i,t))||(!(0!==r||!P(n,e,i))||!(0!==a||!P(n,t,i)))))}function P(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function b(e){return e>0?1:e<0?-1:0}function z(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function A(e,t){const n=M(e.i,e.x,e.y),i=M(t.i,t.x,t.y),o=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function S(e,t,n,i){const o=M(e,t,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function w(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function M(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function I(e,t,n,i){let o=0;for(let s=t,r=n-i;s<n;s+=i)o+=(e[r]-e[s])*(e[s+1]+e[r+1]),r=s;return o}n.d(t,{Ay:()=>i})},30046:(e,t,n)=>{n.d(t,{A:()=>i});const i="#version 300 es\n#define SHADER_NAME icon-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceSizes;\nin float instanceAngles;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec4 instanceIconFrames;\nin float instanceColorModes;\nin vec2 instanceOffsets;\nin vec2 instancePixelOffset;\nout float vColorMode;\nout vec4 vColor;\nout vec2 vTextureCoords;\nout vec2 uv;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = angle * PI / 180.0;\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvec2 iconSize = instanceIconFrames.zw;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * icon.sizeScale, icon.sizeUnits),\nicon.sizeMinPixels, icon.sizeMaxPixels\n);\nfloat iconConstraint = icon.sizeBasis == 0.0 ? iconSize.x : iconSize.y;\nfloat instanceScale = iconConstraint == 0.0 ? 0.0 : sizePixels / iconConstraint;\nvec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\npixelOffset += instancePixelOffset;\npixelOffset.y *= -1.0;\nif (icon.billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvTextureCoords = mix(\ninstanceIconFrames.xy,\ninstanceIconFrames.xy + iconSize,\n(positions.xy + 1.0) / 2.0\n) / icon.iconsTextureDim;\nvColor = instanceColors;\nDECKGL_FILTER_COLOR(vColor, geometry);\nvColorMode = instanceColorModes;\n}\n"},32346:(e,t,n)=>{n.d(t,{A:()=>i});const i="#version 300 es\n#define SHADER_NAME text-background-layer-fragment-shader\nprecision highp float;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin float vLineWidth;\nin vec2 uv;\nin vec2 dimensions;\nout vec4 fragColor;\nfloat round_rect(vec2 p, vec2 size, vec4 radii) {\nvec2 pixelPositionCB = (p - 0.5) * size;\nvec2 sizeCB = size * 0.5;\nfloat maxBorderRadius = min(size.x, size.y) * 0.5;\nvec4 borderRadius = vec4(min(radii, maxBorderRadius));\nborderRadius.xy =\n(pixelPositionCB.x > 0.0) ? borderRadius.xy : borderRadius.zw;\nborderRadius.x = (pixelPositionCB.y > 0.0) ? borderRadius.x : borderRadius.y;\nvec2 q = abs(pixelPositionCB) - sizeCB + borderRadius.x;\nreturn -(min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - borderRadius.x);\n}\nfloat rect(vec2 p, vec2 size) {\nvec2 pixelPosition = p * size;\nreturn min(min(pixelPosition.x, size.x - pixelPosition.x),\nmin(pixelPosition.y, size.y - pixelPosition.y));\n}\nvec4 get_stroked_fragColor(float dist) {\nfloat isBorder = smoothedge(dist, vLineWidth);\nreturn mix(vFillColor, vLineColor, isBorder);\n}\nvoid main(void) {\ngeometry.uv = uv;\nif (textBackground.borderRadius != vec4(0.0)) {\nfloat distToEdge = round_rect(uv, dimensions, textBackground.borderRadius);\nif (textBackground.stroked) {\nfragColor = get_stroked_fragColor(distToEdge);\n} else {\nfragColor = vFillColor;\n}\nfloat shapeAlpha = smoothedge(-distToEdge, 0.0);\nfragColor.a *= shapeAlpha;\n} else {\nif (textBackground.stroked) {\nfloat distToEdge = rect(uv, dimensions);\nfragColor = get_stroked_fragColor(distToEdge);\n} else {\nfragColor = vFillColor;\n}\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"},34421:(e,t,n)=>{n.d(t,{h:()=>o});const i="uniform solidPolygonUniforms {\n  bool extruded;\n  bool isWireframe;\n  float elevationScale;\n} solidPolygon;\n",o={name:"solidPolygon",vs:i,fs:i,uniformTypes:{extruded:"f32",isWireframe:"f32",elevationScale:"f32"}}},34467:(e,t,n)=>{n.d(t,{A:()=>y});var i=n(9350),o=n(84175),s=n(83895),r=n(67118),a=n(3459),l=n(33027),c=n(25337),d=n(98629),u=n(30046),f=n(63016),g=n(60037);const p=[0,0,0,255],h={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeBasis:"height",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:p},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class x extends r.A{getShaders(){return super.getShaders({vs:u.A,fs:f.A,modules:[o.A,s.A,d.T]})}initializeState(){this.state={iconManager:new g.Ay(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:p},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:i}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:r,data:a,getIcon:l,textureParameters:c}=t,{iconManager:d}=this.state;if("string"==typeof s)return;const u=s||this.internalState.isAsyncPropLoading("iconAtlas");d.setProps({loadOptions:t.loadOptions,autoPacking:!u,iconAtlas:s,iconMapping:u?r:null,textureParameters:c}),u?n.iconMapping!==t.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&d.packIcons(a,l),i.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),o.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeBasis:n,sizeMinPixels:o,sizeMaxPixels:s,sizeUnits:r,billboard:a,alphaCutoff:l}=this.props,{iconManager:c}=this.state,d=c.getTexture();if(d){const e=this.state.model,c={iconsTexture:d,iconsTextureDim:[d.width,d.height],sizeUnits:i.p5[r],sizeScale:t,sizeBasis:"height"===n?1:0,sizeMinPixels:o,sizeMaxPixels:s,billboard:a,alphaCutoff:l};e.shaderInputs.setProps({icon:c}),e.draw(this.context.renderPass)}}_getModel(){return new l.K(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new c.V({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([-1,-1,1,-1,-1,1,1,1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){const t=this.getCurrentLayer()?.props.onIconError;t?t(e):a.A.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:n,anchorX:i=t/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(e);return[t/2-i,n/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(e);return[t,n,i,o]}}x.defaultProps=h,x.layerName="IconLayer";const y=x},37072:(e,t,n)=>{n.d(t,{J:()=>r});var i=n(46409),o=n(38846),s=n(79439);const r={props:{},name:"gouraudMaterial",vs:o.l.replace("phongMaterial","gouraudMaterial"),fs:o.X.replace("phongMaterial","gouraudMaterial"),source:s.X.replaceAll("phongMaterial","gouraudMaterial"),defines:{LIGHTING_VERTEX:!0},dependencies:[i.x],uniformTypes:{ambient:"f32",diffuse:"f32",shininess:"f32",specularColor:"vec3<f32>"},defaultUniforms:{ambient:.35,diffuse:.6,shininess:32,specularColor:[.15,.15,.15]},getUniforms(e){const t={...e};return t.specularColor&&(t.specularColor=t.specularColor.map(e=>e/255)),{...r.defaultUniforms,...t}}}},37976:(e,t,n)=>{n.d(t,{A:()=>i});const i="#version 300 es\n#define SHADER_NAME solid-polygon-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"},41661:(e,t,n)=>{n.d(t,{$q:()=>h,A4:()=>c,Dt:()=>l,S8:()=>f});var i=n(29469),o=n(68285);const s=o.rJ.CLOCKWISE,r=o.rJ.COUNTER_CLOCKWISE,a={isClosed:!0};function l(e){return"positions"in e?e.positions:e}function c(e){return"holeIndices"in e?e.holeIndices:null}function d(e,t,n,i,s){let r=t;const l=n.length;for(let o=0;o<l;o++)for(let t=0;t<i;t++)e[r++]=n[o][t]||0;if(!function(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}(n))for(let o=0;o<i;o++)e[r++]=n[0][o]||0;return a.start=t,a.end=r,a.size=i,(0,o.UD)(e,s,a),r}function u(e,t,n,i,s=0,r,l){const c=(r=r||n.length)-s;if(c<=0)return t;let d=t;for(let o=0;o<c;o++)e[d++]=n[s+o];if(!function(e,t,n,i){for(let o=0;o<t;o++)if(e[n+o]!==e[i-t+o])return!1;return!0}(n,i,s,r))for(let o=0;o<i;o++)e[d++]=n[s+o];return a.start=t,a.end=d,a.size=i,(0,o.UD)(e,l,a),d}function f(e,t){!function(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}(e);const n=[],i=[];if("positions"in e){const{positions:o,holeIndices:a}=e;if(a){let e=0;for(let l=0;l<=a.length;l++)e=u(n,e,o,t,a[l-1],a[l],0===l?s:r),i.push(e);return i.pop(),{positions:n,holeIndices:i}}e=o}if(!function(e){return Array.isArray(e[0])}(e))return u(n,0,e,t,0,n.length,s),n;if(!function(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}(e)){let o=0;for(const[a,l]of e.entries())o=d(n,o,l,t,0===a?s:r),i.push(o);return i.pop(),{positions:n,holeIndices:i}}return d(n,0,e,t,s),n}function g(e,t,n){const i=e.length/3;let o=0;for(let s=0;s<i;s++){const r=(s+1)%i;o+=e[3*s+t]*e[3*r+n],o-=e[3*r+t]*e[3*s+n]}return Math.abs(o/2)}function p(e,t,n,i){const o=e.length/3;for(let s=0;s<o;s++){const o=3*s,r=e[o+0],a=e[o+1],l=e[o+2];e[o+t]=r,e[o+n]=a,e[o+i]=l}}function h(e,t,n,o){let s=c(e);s&&(s=s.map(e=>e/t));let r=l(e);const a=o&&3===t;if(n){const e=r.length;r=r.slice();const i=[];for(let o=0;o<e;o+=t){i[0]=r[o],i[1]=r[o+1],a&&(i[2]=r[o+2]);const e=n(i);r[o]=e[0],r[o+1]=e[1],a&&(r[o+2]=e[2])}}if(a){const e=g(r,0,1),t=g(r,0,2),i=g(r,1,2);if(!e&&!t&&!i)return[];e>t&&e>i||(t>i?(n||(r=r.slice()),p(r,0,2,1)):(n||(r=r.slice()),p(r,2,0,1)))}return(0,i.Ay)(r,s,t)}},42067:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(59452),o=n(3459),s=n(53439),r=n(13969),a=n(68493),l=n(63531),c=n(55577);const d={start:1,middle:0,end:-1},u={top:1,center:0,bottom:-1},f=[0,0,0,255],g={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:f},getBorderWidth:{type:"accessor",value:0},backgroundBorderRadius:{type:"object",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:a.uR.characterSet},fontFamily:a.uR.fontFamily,fontWeight:a.uR.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:f},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:f},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class p extends i.A{constructor(){super(...arguments),this.getBoundingRect=(e,t)=>{let{size:[n,i]}=this.transformParagraph(e,t);const{fontSize:o}=this.state.fontAtlasManager.props;n/=o,i/=o;const{getTextAnchor:s,getAlignmentBaseline:r}=this.props;return[(d["function"==typeof s?s(e,t):s]-1)*n/2,(u["function"==typeof r?r(e,t):r]-1)*i/2,n,i]},this.getIconOffsets=(e,t)=>{const{getTextAnchor:n,getAlignmentBaseline:i}=this.props,{x:o,y:s,rowWidth:r,size:[a,l]}=this.transformParagraph(e,t),c=d["function"==typeof n?n(e,t):n],f=u["function"==typeof i?i(e,t):i],g=o.length,p=new Array(2*g);let h=0;for(let d=0;d<g;d++){const e=(1-c)*(a-r[d])/2;p[h++]=(c-1)*a/2+e+o[d],p[h++]=(f-1)*l/2+s[d]}return p}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new a.Ay},this.props.maxWidth>0&&o.A.once(1,"v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:t,oldProps:n,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||t.lineHeight!==n.lineHeight||t.wordBreak!==n.wordBreak||t.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:t,fontWeight:n};if(!i.mapping)return i.setProps(s),!0;for(const r in s)if(s[r]!==i.props[r])return i.setProps(s),!0;return!1}_updateText(){const{data:e,characterSet:t}=this.props,n=e.attributes?.getText;let i,{getText:o}=this.props,r=e.startIndices;const a="auto"===t&&new Set;if(n&&r){const{texts:t,characterCount:s}=(0,l.sI)({...ArrayBuffer.isView(n)?{value:n}:n,length:e.length,startIndices:r,characterSet:a});i=s,o=(e,{index:n})=>t[n]}else{const{iterable:t,objectInfo:n}=(0,s.X)(e);r=[0],i=0;for(const e of t){n.index++;const t=Array.from(o(e,n)||"");a&&t.forEach(a.add,a),i+=t.length,r.push(i)}}this.setState({getText:o,startIndices:r,numInstances:i,characterSet:a||t})}transformParagraph(e,t){const{fontAtlasManager:n}=this.state,i=n.mapping,o=this.state.getText,{wordBreak:s,lineHeight:r,maxWidth:a}=this.props,c=o(e,t)||"";return(0,l.xD)(c,r,s,a*n.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:t,getText:n,fontAtlasManager:{scale:i,atlas:o,mapping:s},styleVersion:l}=this.state,{data:d,_dataDiff:u,getPosition:f,getColor:g,getSize:p,getAngle:h,getPixelOffset:x,getBackgroundColor:y,getBorderColor:v,getBorderWidth:m,backgroundBorderRadius:_,backgroundPadding:C,background:P,billboard:b,fontSettings:z,outlineWidth:A,outlineColor:S,sizeScale:w,sizeUnits:M,sizeMinPixels:I,sizeMaxPixels:L,transitions:O,updateTriggers:T}=this.props,E=this.getSubLayerClass("characters",r.A),F=this.getSubLayerClass("background",c.A);return[P&&new F({getFillColor:y,getLineColor:v,getLineWidth:m,borderRadius:_,padding:C,getPosition:f,getSize:p,getAngle:h,getPixelOffset:x,billboard:b,sizeScale:w,sizeUnits:M,sizeMinPixels:I,sizeMaxPixels:L,transitions:O&&{getPosition:O.getPosition,getAngle:O.getAngle,getSize:O.getSize,getFillColor:O.getBackgroundColor,getLineColor:O.getBorderColor,getLineWidth:O.getBorderWidth,getPixelOffset:O.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:T.getPosition,getAngle:T.getAngle,getSize:T.getSize,getFillColor:T.getBackgroundColor,getLineColor:T.getBorderColor,getLineWidth:T.getBorderWidth,getPixelOffset:T.getPixelOffset,getBoundingRect:{getText:T.getText,getTextAnchor:T.getTextAnchor,getAlignmentBaseline:T.getAlignmentBaseline,styleVersion:l}}}),{data:d.attributes&&d.attributes.background?{length:d.length,attributes:d.attributes.background}:d,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new E({sdf:z.sdf,smoothing:Number.isFinite(z.smoothing)?z.smoothing:a.uR.smoothing,outlineWidth:A/(z.radius||a.uR.radius),outlineColor:S,iconAtlas:o,iconMapping:s,getPosition:f,getColor:g,getSize:p,getAngle:h,getPixelOffset:x,billboard:b,sizeScale:w*i,sizeUnits:M,sizeMinPixels:I*i,sizeMaxPixels:L*i,transitions:O&&{getPosition:O.getPosition,getAngle:O.getAngle,getColor:O.getColor,getSize:O.getSize,getPixelOffset:O.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:T.getText,getPosition:T.getPosition,getAngle:T.getAngle,getColor:T.getColor,getSize:T.getSize,getPixelOffset:T.getPixelOffset,getIconOffsets:{getTextAnchor:T.getTextAnchor,getAlignmentBaseline:T.getAlignmentBaseline,styleVersion:l}}}),{data:d,_dataDiff:u,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(e){(0,a.a4)(e)}}p.defaultProps=g,p.layerName="TextLayer";const h=p},47136:(e,t,n)=>{n.d(t,{A:()=>i});const i=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader\nin vec3 vertexPositions;\nin vec3 vertexPositions64Low;\nin float elevations;\n${n(58990).A}\nvoid main(void) {\nPolygonProps props;\nprops.positions = vertexPositions;\nprops.positions64Low = vertexPositions64Low;\nprops.elevations = elevations;\nprops.normal = vec3(0.0, 0.0, 1.0);\ncalculatePosition(props);\n}\n`},55577:(e,t,n)=>{n.d(t,{A:()=>p});var i=n(9350),o=n(84175),s=n(83895),r=n(67118),a=n(25337),l=n(33027),c=n(23579),d=n(25136),u=n(32346);const f={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,borderRadius:{type:"object",value:0},padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class g extends r.A{getShaders(){return super.getShaders({vs:d.A,fs:u.A,modules:[o.A,s.A,c.F]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;t.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{billboard:t,sizeScale:n,sizeUnits:o,sizeMinPixels:s,sizeMaxPixels:r,getLineWidth:a}=this.props;let{padding:l,borderRadius:c}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),Array.isArray(c)||(c=[c,c,c,c]);const d=this.state.model,u={billboard:t,stroked:Boolean(a),borderRadius:c,padding:l,sizeUnits:i.p5[o],sizeScale:n,sizeMinPixels:s,sizeMaxPixels:r};d.shaderInputs.setProps({textBackground:u}),d.draw(this.context.renderPass)}_getModel(){return new l.K(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new a.V({topology:"triangle-strip",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,0,1,1,1])}}}),isInstanced:!0})}}g.defaultProps=f,g.layerName="TextBackgroundLayer";const p=g},58990:(e,t,n)=>{n.d(t,{A:()=>i});const i="in vec4 fillColors;\nin vec4 lineColors;\nin vec3 pickingColors;\nout vec4 vColor;\nstruct PolygonProps {\nvec3 positions;\nvec3 positions64Low;\nvec3 normal;\nfloat elevations;\n};\nvec3 project_offset_normal(vec3 vector) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject.coordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\nreturn normalize(vector * project.commonUnitsPerWorldUnit);\n}\nreturn project_normal(vector);\n}\nvoid calculatePosition(PolygonProps props) {\nvec3 pos = props.positions;\nvec3 pos64Low = props.positions64Low;\nvec3 normal = props.normal;\nvec4 colors = solidPolygon.isWireframe ? lineColors : fillColors;\ngeometry.worldPosition = props.positions;\ngeometry.pickingColor = pickingColors;\nif (solidPolygon.extruded) {\npos.z += props.elevations * solidPolygon.elevationScale;\n}\ngl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (solidPolygon.extruded) {\n#ifdef IS_SIDE_VERTEX\nnormal = project_offset_normal(normal);\n#else\nnormal = project_normal(normal);\n#endif\ngeometry.normal = normal;\nvec3 lightColor = lighting_getLightColor(colors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, colors.a * layer.opacity);\n} else {\nvColor = vec4(colors.rgb, colors.a * layer.opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n"},59827:(e,t,n)=>{n.d(t,{A:()=>m});var i=n(9350),o=n(84175),s=n(83895),r=n(67118),a=n(33027),l=n(25337),c=n(37072),d=n(71698),u=n(34421),f=n(47136),g=n(13992),p=n(37976);const h=[0,0,0,255],x={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:h},getLineColor:{type:"accessor",value:h},material:!0},y={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class v extends r.A{getShaders(e){return super.getShaders({vs:"top"===e?f.A:g.A,fs:p.A,defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[o.A,c.J,s.A,u.h]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){const{viewport:e}=this.context;let{coordinateSystem:t}=this.props;const{_full3d:n}=this.props;let o;e.isGeospatial&&t===i.rf.DEFAULT&&(t=i.rf.LNGLAT),t===i.rf.LNGLAT&&(o=n?e.projectPosition.bind(e):e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new d.A({preproject:o,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const s=this.getAttributeManager(),r=!0;s.remove(["instancePickingColors"]),s.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:r},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:y,accessor:"getPolygon",update:this.calculatePositions,noAlloc:r,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:r},elevations:{size:1,stepMode:"dynamic",transition:y,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:y,accessor:"getFillColor",defaultValue:h},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:y,accessor:"getLineColor",defaultValue:h},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(e,{index:t,target:n})=>this.encodePickingColor(e&&e.__source?e.__source.index:t,n)}})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,i=this.props.data;return i[0]&&i[0].__source&&(t.object=i.find(e=>e.__source.index===n)),t}disablePickingIndex(e){const t=this.props.data;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:t,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:r,wireframeModel:a,polygonTesselator:l}=this.state,c={extruded:Boolean(t),elevationScale:o,isWireframe:!1};a&&i&&(a.setInstanceCount(l.instanceCount-1),a.shaderInputs.setProps({solidPolygon:{...c,isWireframe:!0}}),a.draw(this.context.renderPass)),r&&n&&(r.setInstanceCount(l.instanceCount-1),r.shaderInputs.setProps({solidPolygon:c}),r.draw(this.context.renderPass)),s&&n&&(s.setVertexCount(l.vertexCount),s.shaderInputs.setProps({solidPolygon:c}),s.draw(this.context.renderPass))}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:t,oldProps:n,changeFlags:i}=e,o=this.getAttributeManager();(i.extensionsChanged||t.filled!==n.filled||t.extruded!==n.extruded)&&(this.state.models?.forEach(e=>e.destroy()),this.setState(this._getModels()),o.invalidateAll())}updateGeometry({props:e,oldProps:t,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:t}=this.state,i=e.data.attributes||{};t.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:i.getPolygon,buffers:i,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged,full3d:e._full3d}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:e,filled:t,extruded:n}=this.props;let i,o,s;if(t){const t=this.getShaders("top");t.defines.NON_INSTANCED_MODEL=1;const n=this.getAttributeManager().getBufferLayouts({isInstanced:!1});i=new a.K(this.context.device,{...t,id:`${e}-top`,topology:"triangle-list",bufferLayout:n,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(n){const t=this.getAttributeManager().getBufferLayouts({isInstanced:!0});o=new a.K(this.context.device,{...this.getShaders("side"),id:`${e}-side`,bufferLayout:t,geometry:new l.V({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),s=new a.K(this.context.device,{...this.getShaders("side"),id:`${e}-wireframe`,bufferLayout:t,geometry:new l.V({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[o,s,i].filter(Boolean),topModel:i,sideModel:o,wireframeModel:s}}calculateIndices(e){const{polygonTesselator:t}=this.state;e.startIndices=t.indexStarts,e.value=t.get("indices")}calculatePositions(e){const{polygonTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}v.defaultProps=x,v.layerName="SolidPolygonLayer";const m=v},60037:(e,t,n)=>{n.d(t,{Ay:()=>u});var i=n(327),o=n(53439);const s=()=>{},r={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},a={x:0,y:0,width:0,height:0};function l(e,t,n,i){const o=Math.min(n/t.width,i/t.height),s=Math.floor(t.width*o),r=Math.floor(t.height*o);return 1===o?{image:t,width:s,height:r}:(e.canvas.height=r,e.canvas.width=s,e.clearRect(0,0,s,r),e.drawImage(t,0,0,t.width,t.height,0,0,s,r),{image:e.canvas,width:s,height:r})}function c(e){return e&&(e.id||e.url)}function d(e,t,n){for(let i=0;i<t.length;i++){const{icon:o,xOffset:s}=t[i];e[c(o)]={...o,x:s,y:n}}}class u{constructor(e,{onUpdate:t=s,onError:n=s}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._samplerParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null,this.device=e,this.onUpdate=t,this.onError=n}finalize(){this._texture?.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?c(e):e;return this._mapping[t]||a}setProps({loadOptions:e,autoPacking:t,iconAtlas:n,iconMapping:i,textureParameters:o}){e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),i&&(this._mapping=i),n&&(this._texture?.delete(),this._texture=null,this._externalTexture=n),o&&(this._samplerParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||"undefined"==typeof document)return;const n=Object.values(function(e,t,n){if(!e||!t)return null;n=n||{};const i={},{iterable:s,objectInfo:r}=(0,o.X)(e);for(const o of s){r.index++;const e=t(o,r),s=c(e);if(!e)throw new Error("Icon is missing.");if(!e.url)throw new Error("Icon url is missing.");i[s]||n[s]&&e.url===n[s].url||(i[s]={...e,source:o,sourceIndex:r.index})}return i}(e,t,this._mapping)||{});if(n.length>0){const{mapping:e,xOffset:t,yOffset:i,rowHeight:o,canvasHeight:s}=function({icons:e,buffer:t,mapping:n={},xOffset:i=0,yOffset:o=0,rowHeight:s=0,canvasWidth:r}){let a=[];for(let u=0;u<e.length;u++){const l=e[u];if(!n[c(l)]){const{height:e,width:c}=l;i+c+t>r&&(d(n,a,o),i=0,o=s+o+t,s=0,a=[]),a.push({icon:l,xOffset:i}),i=i+c+t,s=Math.max(s,e)}}return a.length>0&&d(n,a,o),{mapping:n,rowHeight:s,xOffset:i,yOffset:o,canvasWidth:r,canvasHeight:(l=s+o+t,Math.pow(2,Math.ceil(Math.log2(l))))};var l}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=o,this._mapping=e,this._xOffset=t,this._yOffset=i,this._canvasHeight=s,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",data:null,width:this._canvasWidth,height:this._canvasHeight,sampler:this._samplerParameters||r,mipLevels:this.device.getMipLevelCount(this._canvasWidth,this._canvasHeight)})),this._texture.height!==this._canvasHeight&&(this._texture=function(e,t,n,i){const{width:o,height:s,device:r}=e,a=r.createTexture({format:"rgba8unorm",width:t,height:n,sampler:i,mipLevels:r.getMipLevelCount(t,n)}),l=r.createCommandEncoder();return l.copyTextureToTexture({sourceTexture:e,destinationTexture:a,width:o,height:s}),l.finish(),a.generateMipmapsWebGL(),e.destroy(),a}(this._texture,this._canvasWidth,this._canvasHeight,this._samplerParameters||r)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n),this._texture?.generateMipmapsWebGL()}}_loadIcons(e){const t=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of e)this._pendingCount++,(0,i.H)(n.url,this._loadOptions).then(e=>{const i=c(n),o=this._mapping[i],{x:s,y:r,width:a,height:d}=o,{image:u,width:f,height:g}=l(t,e,a,d);this._texture?.copyExternalImage({image:u,x:s+(a-f)/2,y:r+(d-g)/2,width:f,height:g}),o.width=f,o.height=g,this._texture?.generateMipmapsWebGL(),this.onUpdate()}).catch(e=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:e})}).finally(()=>{this._pendingCount--})}}},63016:(e,t,n)=>{n.d(t,{A:()=>i});const i="#version 300 es\n#define SHADER_NAME icon-layer-fragment-shader\nprecision highp float;\nuniform sampler2D iconsTexture;\nin float vColorMode;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec4 texColor = texture(iconsTexture, vTextureCoords);\nvec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\nfloat a = texColor.a * layer.opacity * vColor.a;\nif (a < icon.alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color, a);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"},63531:(e,t,n)=>{n.d(t,{n8:()=>r,sI:()=>f,xD:()=>u});var i=n(3459);const o=32,s=[];function r({characterSet:e,getFontWidth:t,fontHeight:n,buffer:i,maxCanvasWidth:o,mapping:s={},xOffset:r=0,yOffset:a=0}){let l=0,c=r;const d=n+2*i;for(const f of e)if(!s[f]){const e=t(f);c+e+2*i>o&&(c=0,l++),s[f]={x:c+i,y:a+l*d+i,width:e,height:d,layoutWidth:e,layoutHeight:n},c+=e+2*i}return{mapping:s,xOffset:c,yOffset:a+l*d,canvasHeight:(u=a+(l+1)*d,Math.pow(2,Math.ceil(Math.log2(u))))};var u}function a(e,t,n,i){let o=0;for(let s=t;s<n;s++){const t=e[s];o+=i[t]?.layoutWidth||0}return o}function l(e,t,n,i,o,s){let r=t,l=0;for(let c=t;c<n;c++){const t=a(e,c,c+1,o);l+t>i&&(r<c&&s.push(c),r=c,l=0),l+=t}return l}function c(e,t,n,i,o=0,s){void 0===s&&(s=e.length);const r=[];return"break-all"===t?l(e,o,s,n,i,r):function(e,t,n,i,o,s){let r=t,c=t,d=t,u=0;for(let f=t;f<n;f++)if(" "===e[f]?d=f+1:" "!==e[f+1]&&f+1!==n||(d=f+1),d>c){let t=a(e,c,d,o);u+t>i&&(r<c&&(s.push(c),r=c,u=0),t>i&&(t=l(e,c,d,i,o,s),r=s[s.length-1])),c=d,u+=t}}(e,o,s,n,i,r),r}function d(e,t,n,s,r,a){let l=0,c=0;for(let d=t;d<n;d++){const t=e[d],n=s[t];n?(c||(c=n.layoutHeight),r[d]=l+n.layoutWidth/2,l+=n.layoutWidth):(i.A.warn(`Missing character: ${t} (${t.codePointAt(0)})`)(),r[d]=l,l+=o)}a[0]=l,a[1]=c}function u(e,t,n,i,o){const r=Array.from(e),a=r.length,l=new Array(a),u=new Array(a),f=new Array(a),g=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,p=[0,0],h=[0,0];let x=0,y=0,v=0;for(let m=0;m<=a;m++){const e=r[m];if("\n"!==e&&m!==a||(v=m),v>y){const e=g?c(r,n,i,o,y,v):s;for(let n=0;n<=e.length;n++){const i=0===n?y:e[n-1],s=n<e.length?e[n]:v;d(r,i,s,o,l,h);for(let e=i;e<s;e++){const t=r[e],n=o[t]?.layoutOffsetY||0;u[e]=x+h[1]/2+n,f[e]=h[0]}x+=h[1]*t,p[0]=Math.max(p[0],h[0])}y=v}"\n"===e&&(l[y]=0,u[y]=0,f[y]=0,y++)}return p[1]=x,{x:l,y:u,rowWidth:f,size:p}}function f({value:e,length:t,stride:n,offset:i,startIndices:o,characterSet:s}){const r=e.BYTES_PER_ELEMENT,a=n?n/r:1,l=i?i/r:0,c=o[t]||Math.ceil((e.length-l)/a),d=s&&new Set,u=new Array(t);let f=e;if(a>1||l>0){f=new(0,e.constructor)(c);for(let t=0;t<c;t++)f[t]=e[t*a+l]}for(let g=0;g<t;g++){const e=o[g],t=o[g+1]||c,n=f.subarray(e,t);u[g]=String.fromCodePoint.apply(null,n),d&&n.forEach(d.add,d)}if(d)for(const g of d)s.add(String.fromCodePoint(g));return{texts:u,characterCount:c}}},68493:(e,t,n)=>{n.d(t,{Ay:()=>g,a4:()=>f,uR:()=>a});var i=n(75228),o=n(3459),s=n(63531),r=n(76584);const a={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},l=3;let c=new r.A(l);function d(e,t){for(let n=0;n<e.length;n++)t.data[4*n+3]=e[n]}function u(e,t,n,i){e.font=`${i} ${n}px ${t}`,e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function f(e){o.A.assert(Number.isFinite(e)&&e>=l,"Invalid cache limit"),c=new r.A(e)}class g{constructor(){this.props={...a}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:t}=this.props;return(1.2*e+2*t)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const t=function(e,t){let n;n="string"==typeof t?new Set(Array.from(t)):new Set(t);const i=c.get(e);if(!i)return n;for(const o in i.mapping)n.has(o)&&n.delete(o);return n}(this._key,this.props.characterSet),n=c.get(this._key);if(n&&0===t.size)return void(this._atlas!==n&&(this._atlas=n));const i=this._generateFontAtlas(t,n);this._atlas=i,c.set(this._key,i)}_generateFontAtlas(e,t){const{fontFamily:n,fontWeight:o,fontSize:r,buffer:a,sdf:l,radius:c,cutoff:f}=this.props;let g=t&&t.data;g||(g=document.createElement("canvas"),g.width=1024);const p=g.getContext("2d",{willReadFrequently:!0});u(p,n,r,o);const{mapping:h,canvasHeight:x,xOffset:y,yOffset:v}=(0,s.n8)({getFontWidth:e=>p.measureText(e).width,fontHeight:1.2*r,buffer:a,characterSet:e,maxCanvasWidth:1024,...t&&{mapping:t.mapping,xOffset:t.xOffset,yOffset:t.yOffset}});if(g.height!==x){const e=p.getImageData(0,0,g.width,g.height);g.height=x,p.putImageData(e,0,0)}if(u(p,n,r,o),l){const t=new i.A({fontSize:r,buffer:a,radius:c,cutoff:f,fontFamily:n,fontWeight:`${o}`});for(const n of e){const{data:e,width:i,height:o,glyphTop:s}=t.draw(n);h[n].width=i,h[n].layoutOffsetY=.9*r-s;const a=p.createImageData(i,o);d(e,a),p.putImageData(a,h[n].x,h[n].y)}}else for(const i of e)p.fillText(i,h[i].x,h[i].y+a+.9*r);return{xOffset:y,yOffset:v,mapping:h,data:g,width:g.width,height:g.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:n,buffer:i,sdf:o,radius:s,cutoff:r}=this.props;return o?`${e} ${t} ${n} ${i} ${s} ${r}`:`${e} ${t} ${n} ${i}`}}},71698:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(41661),o=n(44941),s=n(68285);class r extends o.A{constructor(e){const{fp64:t,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:t?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:n,size:1}}})}get(e){const{attributes:t}=this;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}updateGeometry(e){super.updateGeometry(e);const t=this.buffers.indices;if(t)this.vertexCount=(t.value||t).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const t=i.S8(e,this.positionSize);return this.opts.resolution?(0,s.wk)(i.Dt(t),i.A4(t),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?(0,s.Eg)(i.Dt(t),i.A4(t),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):t}return e}getGeometrySize(e){if(a(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}return i.Dt(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,t){if(e&&a(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e,t.indexStart=this.indexStarts[t.geometryIndex+1]}else{const n=e;this._updateIndices(n,t),this._updatePositions(n,t),this._updateVertexValid(n,t)}}_updateIndices(e,{geometryIndex:t,vertexStart:n,indexStart:o}){const{attributes:s,indexStarts:r,typedArrayManager:a}=this;let l=s.indices;if(!l||!e)return;let c=o;const d=i.$q(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,o+d.length,{copy:!0});for(let i=0;i<d.length;i++)l[c++]=d[i]+n;r[t+1]=o+d.length,s.indices=l}_updatePositions(e,{vertexStart:t,geometrySize:n}){const{attributes:{positions:o},positionSize:s}=this;if(!o||!e)return;const r=i.Dt(e);for(let i=t,a=0;a<n;i++,a++){const e=r[a*s],t=r[a*s+1],n=s>2?r[a*s+2]:0;o[3*i]=e,o[3*i+1]=t,o[3*i+2]=n}}_updateVertexValid(e,{vertexStart:t,geometrySize:n}){const{positionSize:o}=this,s=this.attributes.vertexValid,r=e&&i.A4(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,t):s.fill(1,t,t+n),r)for(let i=0;i<r.length;i++)s[t+r[i]/o-1]=0;s[t+n-1]=0}}function a(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}},75228:(e,t,n)=>{n.d(t,{A:()=>o});const i=1e20;class o{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:i=.25,fontFamily:o="sans-serif",fontWeight:s="normal",fontStyle:r="normal",lang:a=null}={}){this.buffer=t,this.cutoff=i,this.radius=n,this.lang=a;const l=this.size=e+4*t,c=this._createCanvas(l),d=this.ctx=c.getContext("2d",{willReadFrequently:!0});d.font=`${r} ${s} ${e}px ${o}`,d.textBaseline="alphabetic",d.textAlign="left",d.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:o,actualBoundingBoxLeft:r,actualBoundingBoxRight:a}=this.ctx.measureText(e),l=Math.ceil(n),c=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(a-r))),d=Math.min(this.size-this.buffer,l+Math.ceil(o)),u=c+2*this.buffer,f=d+2*this.buffer,g=Math.max(u*f,0),p=new Uint8ClampedArray(g),h={data:p,width:u,height:f,glyphWidth:c,glyphHeight:d,glyphTop:l,glyphLeft:0,glyphAdvance:t};if(0===c||0===d)return h;const{ctx:x,buffer:y,gridInner:v,gridOuter:m}=this;this.lang&&(x.lang=this.lang),x.clearRect(y,y,c,d),x.fillText(e,y,y+l);const _=x.getImageData(y,y,c,d);m.fill(i,0,g),v.fill(0,0,g);for(let s=0;s<d;s++)for(let e=0;e<c;e++){const t=_.data[4*(s*c+e)+3]/255;if(0===t)continue;const n=(s+y)*u+e+y;if(1===t)m[n]=0,v[n]=i;else{const e=.5-t;m[n]=e>0?e*e:0,v[n]=e<0?e*e:0}}s(m,0,0,u,f,u,this.f,this.v,this.z),s(v,y,y,c,d,u,this.f,this.v,this.z);for(let i=0;i<g;i++){const e=Math.sqrt(m[i])-Math.sqrt(v[i]);p[i]=Math.round(255-255*(e/this.radius+this.cutoff))}return h}}function s(e,t,n,i,o,s,a,l,c){for(let d=t;d<t+i;d++)r(e,n*s+d,s,o,a,l,c);for(let d=n;d<n+o;d++)r(e,d*s+t,1,i,a,l,c)}function r(e,t,n,o,s,r,a){r[0]=0,a[0]=-i,a[1]=i,s[0]=e[t];for(let l=1,c=0,d=0;l<o;l++){s[l]=e[t+l*n];const o=l*l;do{const e=r[c];d=(s[l]-s[e]+o-e*e)/(l-e)/2}while(d<=a[c]&&--c>-1);c++,r[c]=l,a[c]=d,a[c+1]=i}for(let i=0,l=0;i<o;i++){for(;a[l+1]<i;)l++;const o=r[l],c=i-o;e[t+i*n]=s[o]+c*c}}},76584:(e,t,n)=>{n.d(t,{A:()=>i});class i{constructor(e=5){this._cache={},this._order=[],this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}},95282:(e,t,n)=>{n.d(t,{A:()=>i});const i="#version 300 es\n#define SHADER_NAME multi-icon-layer-fragment-shader\nprecision highp float;\nuniform sampler2D iconsTexture;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nif (!bool(picking.isActive)) {\nfloat alpha = texture(iconsTexture, vTextureCoords).a;\nvec4 color = vColor;\nif (sdf.enabled) {\nfloat distance = alpha;\nalpha = smoothstep(sdf.buffer - sdf.gamma, sdf.buffer + sdf.gamma, distance);\nif (sdf.outlineBuffer > 0.0) {\nfloat inFill = alpha;\nfloat inBorder = smoothstep(sdf.outlineBuffer - sdf.gamma, sdf.outlineBuffer + sdf.gamma, distance);\ncolor = mix(sdf.outlineColor, vColor, inFill);\nalpha = inBorder;\n}\n}\nfloat a = alpha * color.a;\nif (a < icon.alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color.rgb, a * layer.opacity);\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"},98629:(e,t,n)=>{n.d(t,{T:()=>o});const i="uniform iconUniforms {\n  float sizeScale;\n  vec2 iconsTextureDim;\n  float sizeBasis;\n  float sizeMinPixels;\n  float sizeMaxPixels;\n  bool billboard;\n  highp int sizeUnits;\n  float alphaCutoff;\n} icon;\n",o={name:"icon",vs:i,fs:i,uniformTypes:{sizeScale:"f32",iconsTextureDim:"vec2<f32>",sizeBasis:"f32",sizeMinPixels:"f32",sizeMaxPixels:"f32",billboard:"f32",sizeUnits:"i32",alphaCutoff:"f32"}}}}]);