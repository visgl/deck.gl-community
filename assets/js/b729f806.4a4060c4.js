"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[389],{9299:(t,e,o)=>{o.r(e),o.d(e,{assets:()=>g,contentTitle:()=>u,default:()=>v,frontMatter:()=>m,metadata:()=>i,toc:()=>x});const i=JSON.parse('{"id":"infovis-layers/horizon-graph-layer","title":"HorizonGraphLayer","description":"","source":"@site/src/examples/infovis-layers/horizon-graph-layer.mdx","sourceDirName":"infovis-layers","slug":"/infovis-layers/horizon-graph-layer","permalink":"/deck.gl-community/examples/infovis-layers/horizon-graph-layer","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"examplesSidebar","previous":{"title":"Simple Graph Viewer","permalink":"/deck.gl-community/examples/graph-layers/graph-viewer"},"next":{"title":"Editor","permalink":"/deck.gl-community/examples/editable-layers/editor"}}');var n=o(4848),a=o(8453),r=o(454),s=o(6540),l=o(8478),d=o(1175),c=o(8295);class p extends s.Component{static renderInfo(t){return(0,n.jsx)(n.Fragment,{})}render(){const t=this.props,e=Object.assign({},((0,r.A)(t),t));return(0,n.jsx)(l.A,{children:()=>{const t=o(5529).A;return(0,n.jsx)(t,Object.assign({},e))}})}}p.title="Horizon Graph Layer Demo",p.code=d.lP+"/examples/infovis-layers/horizon-graph-layer";const h=(0,c.xv)(p),m={},u="HorizonGraphLayer",g={},x=[];function y(t){const e={h1:"h1",header:"header",...(0,a.R)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.header,{children:(0,n.jsx)(e.h1,{id:"horizongraphlayer",children:"HorizonGraphLayer"})}),"\n","\n",(0,n.jsx)(h,{})]})}function v(t={}){const{wrapper:e}={...(0,a.R)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(y,{...t})}):y(t)}},5529:(t,e,o)=>{o.d(e,{A:()=>C});var i=o(6540),n=o(840),a=o(6816),r=o(1388),s=o(6231),l=o(9452),d=o(1105),c=o(2146),p=o(4175),h=o(5337),m=o(1904);const u="layout(std140) uniform horizonLayerUniforms {\n  float dataTextureSize;  // width = height of the POT texture\n  float dataTextureSizeInv;\n  float dataTextureCount; // actual number of data points\n\n  float bands;\n  float bandsInv;\n  float yAxisScaleInv;\n\n  vec3      positiveColor;\n  vec3      negativeColor;\n} horizonLayer;\n",g={name:"horizonLayer",vs:u,fs:u,uniformTypes:{dataTextureSize:"f32",dataTextureSizeInv:"f32",dataTextureCount:"f32",bands:"f32",bandsInv:"f32",yAxisScaleInv:"f32",positiveColor:"vec3<f32>",negativeColor:"vec3<f32>"}};class x extends c.A{constructor(){super(...arguments),this.state={}}initializeState(){this.state={}}getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME horizon-graph-layer-vertex-shader\n\nin vec3 positions;\nin vec2 uv;\n\nout vec2 v_uv;\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  \n  vec4 position_commonspace = project_position(vec4(positions.xy, 0.0, 1.0));\n  gl_Position = project_common_position_to_clipspace(position_commonspace);\n  geometry.position = position_commonspace;\n  \n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  \n  v_uv = uv;\n}\n",fs:"#version 300 es\n#define SHADER_NAME horizon-graph-layer-fragment-shader\n\nprecision highp float;\nprecision highp int;\n\n/******* UNIFORM *******/\n\nuniform sampler2D dataTexture;\n\n/******* IN *******/\n\nin vec2 v_uv;\n\n/******* OUT *******/\n\nout vec4 fragColor;\n\n\n/******* MAIN *******/\n\nvoid main(void) {\n  // horizontal position to sample index\n  float idx = v_uv.x * horizonLayer.dataTextureCount;\n  // idx = clamp(idx, 0.0, horizonLayer.dataTextureCount - 1.0); // NEEDED???\n\n  // fetch single data point & normalize (-1,+1)\n  float fy = floor(idx * horizonLayer.dataTextureSizeInv);\n  float fx = idx - fy * horizonLayer.dataTextureSize;\n  float val = texelFetch(dataTexture, ivec2(int(fx), int(fy)), 0).r;\n  val *= horizonLayer.yAxisScaleInv;\n\n  // band layering\n  float fband    = abs(val) * horizonLayer.bands;\n  float bandIdx  = clamp(floor(fband), 0.0, horizonLayer.bands - 1.0);\n  float bandFrac = fract(fband);\n\n  // calc our position value and find out color (using mix+step instead of if...else)\n  float positive = step(0.0, val);  // 1 if pos, else 0\n  vec3  baseCol  = mix(horizonLayer.negativeColor, horizonLayer.positiveColor, positive);\n  float curPos   = mix(v_uv.y, 1.0 - v_uv.y, positive);\n  float addOne   = step(curPos, bandFrac);\n\n  float band = bandIdx + addOne;\n  float whiten = 1.0 - band * horizonLayer.bandsInv;\n\n  fragColor = vec4(mix(baseCol, vec3(1.0), whiten), 1.0);\n}\n",modules:[p.A,g]})}_createDataTexture(t){const e=t instanceof Float32Array?t:new Float32Array(t),{device:o}=this.context,i=e.length;let n=32;for(;i>n*n;)n*=2;const a=new Float32Array(n*n);return a.set(e,0),{dataTexture:o.createTexture({data:a,format:"r32float",dimension:"2d",width:n,height:n,sampler:{minFilter:"nearest",magFilter:"nearest",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),dataTextureSize:n,dataTextureCount:i}}_createModel(){const{x:t,y:e,width:o,height:i}=this.props,n=[t,e,0,t+o,e,0,t,e+i,0,t+o,e+i,0],a=new h.V({topology:"triangle-strip",attributes:{positions:{value:new Float32Array(n),size:3},uv:{value:new Float32Array([0,0,1,0,0,1,1,1]),size:2}}});return new m.K(this.context.device,Object.assign({},this.getShaders(),{geometry:a,bufferLayout:this.getAttributeManager().getBufferLayouts()}))}updateState(t){super.updateState(t);const{changeFlags:e}=t;var o,i;e.dataChanged&&(null==(o=this.state.dataTexture)||o.destroy(),this.setState(this._createDataTexture(this.props.data)));(e.extensionsChanged||e.propsChanged)&&(null==(i=this.state.model)||i.destroy(),this.setState({model:this._createModel()}))}draw(){const{model:t,dataTexture:e}=this.state;if(!t)return void this.setState({model:this._createModel()});if(!e)return void this.setState(this._createDataTexture(this.props.data));const{bands:o,yAxisScale:i,positiveColor:n,negativeColor:a}=this.props;t.shaderInputs.setProps({horizonLayer:{dataTexture:this.state.dataTexture,dataTextureSize:this.state.dataTextureSize,dataTextureSizeInv:1/this.state.dataTextureSize,dataTextureCount:this.state.dataTextureCount,bands:o,bandsInv:1/o,yAxisScaleInv:1/i,positiveColor:n.map((t=>t/255)),negativeColor:a.map((t=>t/255))}}),t.draw(this.context.renderPass)}finalizeState(t){var e,o;null==(e=this.state.model)||e.destroy(),null==(o=this.state.dataTexture)||o.destroy(),super.finalizeState(t)}}x.layerName="HorizonGraphLayer",x.defaultProps={yAxisScale:{type:"number",value:1e3},bands:{type:"number",value:2},positiveColor:{type:"color",value:[0,128,0]},negativeColor:{type:"color",value:[0,0,255]},x:{type:"number",value:0},y:{type:"number",value:0},width:{type:"number",value:800},height:{type:"number",value:300}};class y extends l.A{renderLayers(){const{data:t,getSeries:e,getScale:o,bands:i,positiveColor:n,negativeColor:a,dividerColor:r,dividerWidth:s,x:l,y:c,width:p,height:h}=this.props,m=t.length;if(!m)return[];const u=(h-s*(m+1))/m,g=[];if(s>0){const t=[];t.push({polygon:[[l,c],[l+p,c],[l+p,c+s],[l,c+s]]});for(let o=0;o<m-1;o++){const e=c+s+(o+1)*u+o*s;t.push({polygon:[[l,e],[l+p,e],[l+p,e+s],[l,e+s]]})}const e=c+h-s;t.push({polygon:[[l,e],[l+p,e],[l+p,c+h],[l,c+h]]}),g.push(new d.A({id:this.props.id+"-dividers",data:t,getPolygon:t=>t.polygon,getFillColor:r,pickable:!1}))}return t.forEach(((t,r)=>{const d=e(t);if(!d||0===d.length)return;const h=c+s+r*(u+s),m=o(t);g.push(new x({id:this.props.id+"-series-"+r,data:d,yAxisScale:m,bands:i,positiveColor:n,negativeColor:a,x:l,y:h,width:p,height:u}))})),g}}y.layerName="MultiHorizonGraphLayer",y.defaultProps={getSeries:{type:"accessor",value:t=>t.values},getScale:{type:"accessor",value:t=>t.scale},bands:{type:"number",value:2},positiveColor:{type:"color",value:[0,128,0]},negativeColor:{type:"color",value:[0,0,255]},dividerColor:{type:"color",value:[0,0,0]},dividerWidth:{type:"number",value:2},x:{type:"number",value:0},y:{type:"number",value:0},width:{type:"number",value:800},height:{type:"number",value:300}};var v=o(4848);const f={target:[400,300,0],zoom:0},b=1e4,w=function(t,e){void 0===e&&(e=b);const o=new Float32Array(e);for(let i=0;i<e;i++){const e=.0015*i;switch(t){case"sine":o[i]=100*Math.sin(e);break;case"sine+noise":o[i]=100*Math.sin(e)+30*(Math.random()-.5);break;case"noise":o[i]=100*(Math.random()-.5);break;case"flat":o[i]=42;break;case"sawtooth":{const t=e%(2*Math.PI);o[i]=100*(t/Math.PI-1);break}case"square":o[i]=Math.sin(e)>0?100:-100;break;default:throw new Error("bad data type")}}return o},j=t=>"#"+t.map((t=>t.toString(16).padStart(2,"0"))).join(""),S=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]};function C(){const[t,e]=(0,i.useState)(2),[o,l]=(0,i.useState)(5),[d,c]=(0,i.useState)(["sine","sine+noise","noise","sawtooth","square"]),[p,h]=(0,i.useState)(.75),[m,u]=(0,i.useState)([0,128,0]),[g,x]=(0,i.useState)([0,0,255]),[C,z]=(0,i.useState)([0,0,0]),[k,A]=(0,i.useState)(0),[_,P]=(0,i.useState)(0),[N,I]=(0,i.useState)(800),[T,O]=(0,i.useState)(25),B=T*o,[M,V]=(0,i.useState)(null),L=(0,i.useMemo)((()=>{const t=[];for(let e=0;e<5;e++)t.push(w(d[e]));return t}),[d]),E=(0,i.useMemo)((()=>{const t=[];for(let e=0;e<o;e++)t.push({name:"Series "+(e+1),type:d[e%5],values:L[e%5],scale:120});return t}),[o,d]),F=(0,i.useMemo)((()=>{const t=(B-p*(o+1))/o;return E.map(((e,o)=>({text:e.name+" ("+e.type+")",position:[k-10,_+p+o*(t+p)+t/2,0],size:12,color:[80,80,80],angle:0,textAnchor:"end",alignmentBaseline:"center"})))}),[E,o,p,B,k,_]),R=(0,i.useMemo)((()=>{if(!M)return[];const[t]=M;if(t<k||t>k+N)return[];const e=(t-k)/N,i=Math.round(e*(b-1));if(i<0||i>=b)return[];const n=(B-p*(o+1))/o;return E.map(((t,e)=>{const o=_+p+e*(n+p),a=t.values[i],r=o+n/2;return{text:""+a.toFixed(1),position:[k+N+10,r,0],size:12,color:[80,80,80],angle:0,textAnchor:"start",alignmentBaseline:"center"}}))}),[M,E,k,_,N,B,o,p]),Z=(0,i.useMemo)((()=>{if(!M)return[];const[t]=M;return t<k||t>k+N?[]:[{sourcePosition:[t,_,0],targetPosition:[t,_+B,0]}]}),[M,k,_,N,B]),q=[new y({id:"horizon-graph-layer",data:E,bands:t,dividerWidth:p,positiveColor:m,negativeColor:g,dividerColor:C,x:k,y:_,width:N,height:B}),new r.A({id:"series-labels",data:F,getText:t=>t.text,getPosition:t=>t.position,getSize:t=>t.size,getColor:t=>t.color,getAngle:t=>t.angle,getTextAnchor:t=>t.textAnchor,getAlignmentBaseline:t=>t.alignmentBaseline,fontFamily:"Arial, sans-serif",fontWeight:"normal"}),new s.A({id:"vertical-crosshair",data:Z,getSourcePosition:t=>t.sourcePosition,getTargetPosition:t=>t.targetPosition,getColor:[0,0,0,200],getWidth:1,widthUnits:"pixels"}),new r.A({id:"intersection-values",data:R,getText:t=>t.text,getPosition:t=>t.position,getSize:t=>t.size,getColor:t=>t.color,getAngle:t=>t.angle,getTextAnchor:t=>t.textAnchor,getAlignmentBaseline:t=>t.alignmentBaseline,fontFamily:"Arial, sans-serif",fontWeight:"normal"})];return(0,v.jsxs)("div",{style:{display:"flex",width:"100vw",height:"100vh",overflow:"hidden"},children:[(0,v.jsxs)("div",{style:{width:"350px",height:"100vh",overflowY:"auto",background:"rgba(255, 255, 255, 0.95)",padding:"15px",fontFamily:"Arial, sans-serif",boxShadow:"2px 0 10px rgba(0,0,0,0.1)",borderRight:"1px solid #ddd"},children:[(0,v.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,v.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"5px"},children:"Number of Series:"}),(0,v.jsxs)("select",{value:o,onChange:t=>l(Number(t.target.value)),style:{width:"100%",padding:"5px"},children:[(0,v.jsx)("option",{value:1,children:"1"}),(0,v.jsx)("option",{value:2,children:"2"}),(0,v.jsx)("option",{value:3,children:"3"}),(0,v.jsx)("option",{value:4,children:"4"}),(0,v.jsx)("option",{value:5,children:"5"}),(0,v.jsx)("option",{value:10,children:"10"}),(0,v.jsx)("option",{value:20,children:"20"}),(0,v.jsx)("option",{value:100,children:"100"}),(0,v.jsx)("option",{value:1e3,children:"1000"}),(0,v.jsx)("option",{value:1e4,children:"10000"})]})]}),(0,v.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,v.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"5px"},children:"Bands:"}),(0,v.jsxs)("select",{value:t,onChange:t=>e(Number(t.target.value)),style:{width:"100%",padding:"5px"},children:[(0,v.jsx)("option",{value:1,children:"1"}),(0,v.jsx)("option",{value:2,children:"2"}),(0,v.jsx)("option",{value:3,children:"3"}),(0,v.jsx)("option",{value:4,children:"4"}),(0,v.jsx)("option",{value:5,children:"5"}),(0,v.jsx)("option",{value:6,children:"6"})]})]}),(0,v.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,v.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"5px"},children:"Divider Line Width:"}),(0,v.jsx)("input",{type:"range",min:"0",max:"10",step:"0.25",value:p,onChange:t=>h(Number(t.target.value)),style:{width:"100%"}}),(0,v.jsx)("div",{style:{fontSize:"12px",color:"#666",textAlign:"center"},children:p})]}),(0,v.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,v.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"10px"},children:"Series Data Types:"}),Array.from({length:5},((t,e)=>(0,v.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,v.jsxs)("label",{style:{display:"block",fontSize:"12px",marginBottom:"3px"},children:["Series ",e+1,":"]}),(0,v.jsxs)("select",{value:d[e],onChange:t=>{const o=[...d];o[e]=t.target.value,c(o)},style:{width:"100%",padding:"3px",fontSize:"12px"},children:[(0,v.jsx)("option",{value:"sine",children:"Sine Wave"}),(0,v.jsx)("option",{value:"sine+noise",children:"Sine Wave + Noise"}),(0,v.jsx)("option",{value:"noise",children:"Noise Only"}),(0,v.jsx)("option",{value:"flat",children:"Flat Line"}),(0,v.jsx)("option",{value:"sawtooth",children:"Sawtooth"}),(0,v.jsx)("option",{value:"square",children:"Square Wave"})]})]},e)))]}),(0,v.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,v.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"10px"},children:"Colors:"}),(0,v.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,v.jsx)("label",{style:{display:"block",fontSize:"12px",marginBottom:"5px"},children:"Positive Color:"}),(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,v.jsx)("input",{type:"color",value:j(m),onChange:t=>u(S(t.target.value)),style:{width:"50px",height:"30px",border:"none",borderRadius:"4px",cursor:"pointer"}}),(0,v.jsxs)("span",{style:{fontSize:"11px",color:"#666",fontFamily:"monospace"},children:["RGB(",m.join(", "),")"]})]})]}),(0,v.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,v.jsx)("label",{style:{display:"block",fontSize:"12px",marginBottom:"5px"},children:"Negative Color:"}),(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,v.jsx)("input",{type:"color",value:j(g),onChange:t=>x(S(t.target.value)),style:{width:"50px",height:"30px",border:"none",borderRadius:"4px",cursor:"pointer"}}),(0,v.jsxs)("span",{style:{fontSize:"11px",color:"#666",fontFamily:"monospace"},children:["RGB(",g.join(", "),")"]})]})]}),(0,v.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,v.jsx)("label",{style:{display:"block",fontSize:"12px",marginBottom:"5px"},children:"Divider Color:"}),(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,v.jsx)("input",{type:"color",value:j(C),onChange:t=>z(S(t.target.value)),style:{width:"50px",height:"30px",border:"none",borderRadius:"4px",cursor:"pointer"}}),(0,v.jsxs)("span",{style:{fontSize:"11px",color:"#666",fontFamily:"monospace"},children:["RGB(",C.join(", "),")"]})]})]})]}),(0,v.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,v.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"10px"},children:"Position & Size:"}),(0,v.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,v.jsxs)("label",{style:{display:"block",fontSize:"12px",marginBottom:"3px"},children:["X Position: ",k]}),(0,v.jsx)("input",{type:"range",min:"-2000",max:"2000",value:k,onChange:t=>A(Number(t.target.value)),style:{width:"100%"}})]}),(0,v.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,v.jsxs)("label",{style:{display:"block",fontSize:"12px",marginBottom:"3px"},children:["Y Position: ",_]}),(0,v.jsx)("input",{type:"range",min:"-2000",max:"2000",value:_,onChange:t=>P(Number(t.target.value)),style:{width:"100%"}})]}),(0,v.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,v.jsxs)("label",{style:{display:"block",fontSize:"12px",marginBottom:"3px"},children:["Width: ",N]}),(0,v.jsx)("input",{type:"range",min:"1",max:"5000",value:N,onChange:t=>I(Number(t.target.value)),style:{width:"100%"}})]}),(0,v.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,v.jsxs)("label",{style:{display:"block",fontSize:"12px",marginBottom:"3px"},children:["Height (per series): ",T]}),(0,v.jsx)("input",{type:"range",min:"1",max:"500",value:T,onChange:t=>O(Number(t.target.value)),style:{width:"100%"}})]})]})]}),(0,v.jsx)("div",{style:{flex:1,height:"100vh",position:"relative",overflow:"hidden"},children:(0,v.jsx)(n.A,{views:new a.A,initialViewState:f,controller:!0,layers:q,onHover:t=>{t.coordinate?V([t.coordinate[0],t.coordinate[1]]):V(null)}})})]})}},8295:(t,e,o)=>{o.d(e,{Ys:()=>q,ww:()=>Y,xv:()=>B});var i=o(6540),n=o(3724);const a=t=>"@media screen and (max-width: 480px)",r=n.Ay.div.withConfig({displayName:"styled__PanelContainer",componentId:"sc-oqnqzc-0"})(["font-size:14px;position:absolute;top:0;right:0;width:344px;background:var(--ifm-background-surface-color);box-shadow:var(--ifm-global-shadow-lw);margin:24px;padding:10px 24px;max-height:96%;overflow-x:hidden;overflow-y:auto;overflow-y:overlay;outline:none;z-index:1;","{width:auto;left:0;}"],a),s=n.Ay.div.withConfig({displayName:"styled__PanelExpander",componentId:"sc-oqnqzc-1"})(["display:none;width:16px;height:16px;font-family:serif;font-size:0.8em;text-align:center;line-height:16px;border-radius:50%;background:",";color:",";","{display:block;}"],(t=>t.$expanded?"none":"var(--ifm-color-gray-900)"),(t=>t.$expanded?"var(--ifm-color-black)":"var(--ifm-color-white)"),a),l=n.Ay.div.withConfig({displayName:"styled__PanelTitle",componentId:"sc-oqnqzc-2"})(["display:flex;align-items:center;justify-content:space-between;font:bold 1.25em var(--ifm-font-family-base);margin:8px 0;","{cursor:pointer;}"],a),d=n.Ay.div.withConfig({displayName:"styled__PanelContent",componentId:"sc-oqnqzc-3"})(["div > *{vertical-align:middle;white-space:nowrap;}div > label{display:inline-block;width:40%;margin-right:10%;color:var(--ifm-color-content-secondary);margin-top:2px;margin-bottom:2px;}div > input,div > a,div > button,div > select{font:normal 11px/16px var(--ifm-font-family-base);line-height:20px;text-transform:none;text-overflow:ellipsis;overflow:hidden;display:inline-block;padding:0 4px;width:50%;height:20px;text-align:left;}div > button{color:initial;}div > button:disabled{color:var(--ifm-color-gray-300);cursor:default;background:var(--ifm-color-gray-300);}div > input{border:solid 1px var(--ifm-color-gray-300);&:disabled{background:var(--ifm-color-white);}&[type='checkbox']{height:auto;}}p{margin-bottom:12px;white-space:initial;}","{display:",";}"],a,(t=>t.$expanded?"block":"none")),c=n.Ay.a.withConfig({displayName:"styled__SourceLink",componentId:"sc-oqnqzc-4"})(["display:block;text-align:right;margin-top:8px;font:bold 12px/20px var(--ifm-font-family-base);color:var(--ifm-color-content-secondary);","{display:",";}"],a,(t=>t.$expanded?"block":"none"));var p=o(8587),h=o(4848);const m=["name","onChange","displayName","altValue","displayValue"],u=n.Ay.div.withConfig({displayName:"input__InputContainer",componentId:"sc-1myx0c6-0"})(["position:relative;width:100%;&:last-child{margin-bottom:20px;}> *{vertical-align:middle;white-space:nowrap;}label{display:inline-block;width:40%;margin-right:10%;margin-top:2px;margin-bottom:2px;}input,a,button{background:var(--ifm-background-surface-color);font-size:0.9em;text-transform:none;text-overflow:ellipsis;overflow:hidden;display:inline-block;padding:0 4px;margin:0;width:50%;height:20px;line-height:1.833;text-align:left;}button{color:initial;}button:disabled{color:var(--ifm-color-gray-500);cursor:default;background:var(--ifm-color-gray-300);}input{border:solid 1px var(--ifm-color-gray-500);&:disabled{background:var(--ifm-color-gray-300);}&[type='checkbox']{height:auto;}}.tooltip{left:50%;top:24px;opacity:0;pointer-events:none;transition:opacity 200ms;}&:hover .tooltip{opacity:1;}"]);function g(t){let{name:e,min:o,max:n,step:a,displayName:r,displayValue:s,onChange:l}=t;const d=(0,i.useCallback)((t=>{const{value:i}=t.target;let a=Number(i);void 0!==o&&(a=Math.max(o,a)),void 0!==n&&(a=Math.min(n,a)),l(e,a)}),[o,n,l]);return(0,h.jsxs)(u,{children:[(0,h.jsx)("label",{children:r}),(0,h.jsxs)("div",{className:"tooltip",children:[r,": ",String(s)]}),(0,h.jsx)("input",{type:"range",min:o,max:n,value:s,step:a,onChange:d})]})}function x(t){let{name:e,value:o,displayName:n,displayValue:a,onChange:r}=t;const s=(0,i.useCallback)((t=>{const o=t.target.checked;r(e,o)}),[r]);return(0,h.jsxs)(u,{children:[(0,h.jsx)("label",{children:n}),(0,h.jsxs)("div",{className:"tooltip",children:[n,": ",String(a)]}),(0,h.jsx)("input",{type:"checkbox",checked:o,onChange:s})]})}function y(t){const{name:e,onChange:o,displayName:n,altValue:a,displayValue:r}=t,s=(0,p.A)(t,m),l=(0,i.useCallback)((t=>{o(e,t.target.value)}),[o]),d=(0,i.useCallback)((()=>{o(e,a)}),[a,o]),c=s;switch(t.type){case"link":return(0,h.jsxs)(u,{children:[(0,h.jsx)("label",{children:n}),(0,h.jsx)("a",{href:r,target:"_new",children:r})]});case"function":case"json":const e=Boolean(a);return(0,h.jsxs)(u,{children:[(0,h.jsx)("label",{children:n}),(0,h.jsx)("button",{type:"text",disabled:!e,onClick:d,children:r})]});case"select":return(0,h.jsxs)(u,{children:[(0,h.jsx)("label",{children:n}),(0,h.jsx)("select",{onChange:l,value:r,children:t.options.map(((t,e)=>(0,h.jsx)("option",{value:t,children:t},e)))})]});case"checkbox":return(0,h.jsx)(x,Object.assign({},t));case"range":return(0,h.jsx)(g,Object.assign({},t));default:return(0,h.jsxs)(u,{children:[(0,h.jsx)("label",{children:n}),(0,h.jsxs)("div",{className:"tooltip",children:[n,": ",String(r)]}),(0,h.jsx)("input",Object.assign({},c,{value:r,onChange:l}))]})}}const v=n.Ay.div.withConfig({displayName:"spinner__SpinnerContainer",componentId:"sc-ok6n2c-0"})(["height:18px;line-height:18px;font-size:10px;> div{white-space:nowrap;left:0;bottom:0;position:absolute;height:18px;padding-left:20px;transition:width 0.5s;}.spinner--fill{background:$primary;color:$white;overflow:hidden;}.spinner--text{color:$black-40;}&.done{height:0 !important;line-height:0;font-size:0;transition:height 0.5s 1s;> div{height:0 !important;transition:height 0.5s 1s;}}"]);function f(t){let{meta:e}=t;if(!Number.isFinite(e.progress)&&!Number.isFinite(e.progressAlt))return null;const o=(e.progress||0)+(e.progressAlt||0),i=Math.round(1e3*o)/10,n="Loading... "+i+"%";return(0,h.jsxs)(v,{className:o>=1?"done":"",children:[(0,h.jsx)("div",{className:"spinner--text",children:n}),(0,h.jsx)("div",{className:"spinner--fill",style:{width:i+"%"},children:n})]})}const b=n.Ay.div.withConfig({displayName:"info-panel__InfoPanelContent",componentId:"sc-1qy2onu-0"})(["hr{margin:12px -24px;}a{text-decoration:none;display:inline;color:var(--ifm-color-primary);}p{margin-bottom:16px;}.legend{display:inline-block;width:12px;height:12px;}.stat{text-transform:uppercase;font-size:0.833em;b{display:block;font-size:3em;font-weight:bold;line-height:1.833;}}hr{border:none;background:var(--ifm-color-gray-400);height:1px;}.layout{display:table;width:100%;> *{display:table-cell !important;}.col-1-3{width:33.33%;}.col-1-2{width:50%;}.text-right{text-align:right;}.text-center{text-align:center;}}"]);function w(t){let{title:e,children:o,sourceLink:n}=t;const[a,p]=(0,i.useState)(!1);return(0,h.jsxs)(r,{children:[(0,h.jsxs)(l,{onClick:()=>p(!a),children:[(0,h.jsx)("div",{children:e}),(0,h.jsx)(s,{$expanded:a,children:a?"\u2715":"i"})]}),(0,h.jsx)(d,{$expanded:a,children:o}),(0,h.jsx)(c,{$expanded:a,href:n,target:"_new",children:"View Code \u2197"})]})}function j(t){let{title:e,sourceLink:o,params:i,meta:n,children:a,updateParam:r}=t;return(0,h.jsxs)(w,{title:e,sourceLink:o,children:[(0,h.jsxs)(b,{children:[a,Object.keys(i).length>0&&(0,h.jsx)("hr",{}),Object.keys(i).sort().map(((t,e)=>(0,h.jsx)(y,Object.assign({name:t},i[t],{onChange:r}),e+"-"+t)))]}),(0,h.jsx)(f,{meta:n})]})}var S=o(4684);const C={};function z(t,e){let o=0;C[t]&&C[t].terminate();const i=new Worker(t);C[t]=i;let n=[];i.onmessage=t=>{const{action:o,data:a,meta:r}=t.data;"end"===o?i.terminate():"add"===o&&a&&a.length&&(n=n.concat(a),e(n,r))},this.onProgress=t=>{const{responseText:e}=t.target,n=e.lastIndexOf("\n")+1;i.postMessage({event:"progress",text:e.slice(o,n)}),o=n},this.onLoad=t=>{const{responseText:e}=t;i.postMessage({event:"load",text:e.slice(o)})}}function k(t,e,o){if(e){const i=(0,S.Em)(t),n=new z(e,((t,e)=>{o(t,e)}));i.on("progress",n.onProgress).on("load",n.onLoad).get()}else/\.(json|geojson)$/.test(t)?(0,S.Pq)(t,((t,e)=>{t||o(e,{})})):(0,S.Qq)(t,((t,e)=>{t||o(e,{})}))}function A(t,e){return e.match(/^\w+:\/\//)?e:t.replace(/\/$/,"")+"/"+e.replace(/^\//,"")}var _=o(6420);const P=t=>{if("function"===t.type){let e=String(t.value);if(Array.isArray(t.value)&&(e="["+e+"]"),"function"==typeof t.value)return e=e.replace(/^function (\w+)?\((\w*?)\)/,"$2 =>"),e=e.replace(/^function (\w+)?(\(.*?\))/,"$2 =>"),e=e.replace(/\{\s*return\s*(.*?);?\s*\}$/,"$1"),Object.assign({},t,{displayValue:e});if(!t.altType)return Object.assign({},t,{displayValue:e});t.type=t.altType}if("json"===t.type)return Object.assign({},t,{displayValue:JSON.stringify(t.value)});if("color"===t.type){const o=function(t){if(!t)return[255,255,255,0];if(Array.isArray(t))return t.slice(0,4);const e=(0,_.Qh)(t);return[e.r,e.g,e.b,255]}(t.value);return Object.assign({},t,{value:o,displayValue:(e=o,e.slice(0,3).reduce(((t,e)=>t+(e<16?"0":"")+e.toString(16)),"#"))})}var e;return Object.assign({},t,{displayValue:String(t.value)})};var N=o(1175),I=o(6025);const T=n.Ay.div.withConfig({displayName:"make-example__DemoContainer",componentId:"sc-is6oih-0"})([".tooltip,.deck-tooltip{position:absolute;padding:4px 12px;background:rgba(0,0,0,0.8);color:var(--ifm-color-white);max-width:300px;font-size:12px;z-index:9;pointer-events:none;white-space:nowrap;}"]),O=n.Ay.div.withConfig({displayName:"make-example__MapTip",componentId:"sc-is6oih-1"})(["position:absolute;right:12px;bottom:20px;color:var(--ifm-color-white);mix-blend-mode:difference;font-size:14px;@media screen and (max-width:480px){display:none;}"]);function B(t,e){let{isInteractive:o=!0,style:n}=void 0===e?{}:e;const{parameters:a={},mapStyle:r}=t,s=Object.keys(a).reduce(((t,e)=>(t[e]=P(a[e]),t)),{}),l=Array.isArray(t.data)?t.data.map((t=>null)):null;return function(){const[e,a]=(0,i.useState)(l),[d,c]=(0,i.useState)(s),[p,m]=(0,i.useState)({}),u=(0,I.Ay)("/"),g=(0,i.useCallback)((t=>{const e=Object.keys(t).reduce(((e,o)=>(e[o]=P(t[o]),e)),{});c((t=>Object.assign({},t,e)))}),[]),x=(0,i.useCallback)((t=>{m((e=>Object.assign({},e,t)))}),[]);(0,i.useEffect)((()=>{let e=t.data;if(!e)return;const o=Array.isArray(e);o||(e=[e]);for(let t=0;t<e.length;t++){const{url:i,worker:n}=e[t];k(A(u,i),n&&A(u,n),((e,i)=>{a(o?o=>{const i=o.slice();return i[t]=e,i}:e),i&&m((t=>Object.assign({},t,i)))}))}}),[]);return(0,h.jsxs)(T,{style:n,children:[(0,h.jsx)(t,{data:e,mapStyle:r||N.Vi.BLANK,params:d,useParam:g,onStateChange:x}),o&&(0,h.jsx)(j,{title:t.title,params:d,meta:p,updateParam:(t,e)=>{const o=d[t];o&&c(Object.assign({},d,{[t]:P(Object.assign({},o,{value:e}))}))},sourceLink:t.code,children:t.renderInfo(p)}),o&&r&&(0,h.jsx)(O,{children:"Hold down shift to rotate"})]})}}var M=o(609);const V=n.Ay.div.withConfig({displayName:"styled__ExampleHeader",componentId:"sc-1dgi8sb-0"})(["font:bold 20px/28px var(--ifm-font-family-base);color:var(--ifm-color-content-secondary);margin:0 20px;border-bottom:1px solid 20px;display:inline-block;padding:20px 20px 4px 0;"]),L=n.Ay.main.withConfig({displayName:"styled__MainExamples",componentId:"sc-1dgi8sb-1"})(["padding:16px 0;"]),E=n.Ay.main.withConfig({displayName:"styled__ExamplesGroup",componentId:"sc-1dgi8sb-2"})(["display:flex;flex-wrap:wrap;padding:16px;"]),F=n.Ay.a.withConfig({displayName:"styled__ExampleCard",componentId:"sc-1dgi8sb-3"})(["cursor:pointer;text-decoration:none;width:50%;max-width:240px;line-height:0;outline:none;padding:4px;position:relative;img{transition-property:filter;transition-duration:var(--ifm-transition-slow);transition-timing-function:var(--ifm-transition-timing-default);}&:hover{box-shadow:var(--ifm-global-shadow-md);}&:hover img{filter:contrast(0.2);}","{width:33%;min-width:200px;}@media screen and (max-width:632px){width:50%;}"],a),R=n.Ay.div.withConfig({displayName:"styled__ExampleTitle",componentId:"sc-1dgi8sb-4"})(["position:absolute;display:flex;justify-content:center;flex-direction:column;color:var(--ifm-color-white);font-size:1.5em;text-align:center;line-height:initial;width:90%;height:90%;top:5%;left:5%;border:solid 1px var(--ifm-color-white);opacity:0;transition-property:opacity;transition-duration:var(--ifm-transition-slow);transition-timing-function:var(--ifm-transition-timing-default);&:hover{opacity:1;}"]);function Z(t,e){let{label:o,items:i}=t;return[(0,h.jsx)(V,{children:o},o+"-header"),(0,h.jsx)(E,{children:i.map((t=>function(t,e){const o=(0,I.Ay)(e(t)),{label:i,href:n}=t;return(0,h.jsxs)(F,{href:n,children:[(0,h.jsx)("img",{width:"100%",src:o,alt:i}),(0,h.jsx)(R,{children:(0,h.jsx)("span",{children:i})})]},i)}(t,e)))},o)]}function q(t){let{getThumbnail:e}=t;const o=(0,M.t)();return console.log(o),(0,h.jsx)(L,{children:o.items.map((t=>"category"===t.type?Z(t,e):null))})}var U=o(4586);const X=n.Ay.section.withConfig({displayName:"styled__Banner",componentId:"sc-exnbu5-0"})(["position:relative;height:30rem;background:var(--ifm-color-gray-400);color:var(--ifm-color-gray-900);z-index:0;","{height:80vh;}"],a),D=n.Ay.div.withConfig({displayName:"styled__Container",componentId:"sc-exnbu5-1"})(["position:relative;padding:2rem;max-width:80rem;width:100%;height:100%;margin:0;"]),W=(0,n.Ay)(D).withConfig({displayName:"styled__BannerContainer",componentId:"sc-exnbu5-2"})(["position:absolute;bottom:0;height:auto;padding-left:4rem;z-index:0;pointer-events:none;"]),G=n.Ay.div.withConfig({displayName:"styled__HeroExampleContainer",componentId:"sc-exnbu5-3"})(["position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;"]),$=(n.Ay.section.withConfig({displayName:"styled__Section",componentId:"sc-exnbu5-4"})(["&:nth-child(2n + 1){background:var(--ifm-color-gray-300);}"]),n.Ay.h1.withConfig({displayName:"styled__ProjectName",componentId:"sc-exnbu5-5"})(["font-size:5em;line-height:1;text-transform:uppercase;letter-spacing:4px;font-weight:700;margin:0;margin-bottom:16px;"])),H=n.Ay.a.withConfig({displayName:"styled__GetStartedLink",componentId:"sc-exnbu5-6"})(["pointer-events:all;font-size:12px;line-height:44px;letter-spacing:2px;font-weight:bold;margin:24px 0;padding:0 4rem;pointer-events:all;display:inline-block;text-decoration:none;transition:background-color 250ms ease-in,color 250ms ease-in;border:solid 2px var(--ifm-color-primary);color:var(--ifm-color-gray-900);border-image:linear-gradient( to right,var(--ifm-color-gray-700) 0%,var(--ifm-color-gray-400) 100% );border-image-slice:2;&:visited{color:var(--ifm-color-gray-900);}&:active{color:var(--ifm-color-white);}&:hover{color:var(--ifm-color-white);background-color:var(--ifm-color-primary);}"]);function Y(t){let{HeroExample:e,children:o}=t;const{siteConfig:i}=(0,U.A)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(X,{children:[(0,h.jsx)(G,{children:e&&(0,h.jsx)(e,{})}),(0,h.jsxs)(W,{children:[(0,h.jsx)($,{children:i.title}),(0,h.jsx)("p",{children:i.tagline}),(0,h.jsx)(H,{href:"./docs",children:"GET STARTED"})]})]}),o]})}},1175:(t,e,o)=>{o.d(e,{Vi:()=>i,lP:()=>n});const i={LIGHT:"https://deck.gl/mapstyle/deck-light.json",LIGHT_LABEL:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",DARK:"https://deck.gl/mapstyle/deck-dark.json",BLANK:{version:8,sources:{},layers:[]}},n="https://github.com/visgl/deck.gl-community/tree/master"},6816:(t,e,o)=>{o.d(e,{A:()=>b});var i=o(1152),n=o(7345),a=o(5077),r=o(4901),s=o(3588),l=o(4697);const d=(new a.k).lookAt({eye:[0,0,1]});function c({width:t,height:e,near:o,far:i,padding:n}){let s=-t/2,l=t/2,d=-e/2,c=e/2;if(n){const{left:o=0,right:i=0,top:a=0,bottom:p=0}=n,h=(0,r.qE)((o+t-i)/2,0,t)-t/2,m=(0,r.qE)((a+e-p)/2,0,e)-e/2;s-=h,l-=h,d+=m,c+=m}return(new a.k).ortho({left:s,right:l,bottom:d,top:c,near:o,far:i})}class p extends n.A{constructor(t){const{width:e,height:o,near:i=.1,far:n=1e3,zoom:a=0,target:r=[0,0,0],padding:s=null,flipY:l=!0}=t,p=Array.isArray(a)?a[0]:a,h=Array.isArray(a)?a[1]:a,m=Math.min(p,h),u=Math.pow(2,m);let g;if(p!==h){const t=Math.pow(2,p),e=Math.pow(2,h);g={unitsPerMeter:[t/u,e/u,1],metersPerUnit:[u/t,u/e,1]}}super({...t,longitude:void 0,position:r,viewMatrix:d.clone().scale([u,u*(l?-1:1),u]),projectionMatrix:c({width:e||1,height:o||1,padding:s,near:i,far:n}),zoom:m,distanceScales:g})}projectFlat([t,e]){const{unitsPerMeter:o}=this.distanceScales;return[t*o[0],e*o[1]]}unprojectFlat([t,e]){const{metersPerUnit:o}=this.distanceScales;return[t*o[0],e*o[1]]}panByPosition(t,e){const o=(0,l.xJ)(e,this.pixelUnprojectionMatrix),i=this.projectFlat(t),n=s.WQ([],i,s.ze([],o)),a=s.WQ([],this.center,n);return{target:this.unprojectFlat(a)}}}var h=o(4027),m=o(676),u=o(5667),g=o(4443);class x extends m.A{constructor(t){const{width:e,height:o,rotationX:i=0,rotationOrbit:n=0,target:a=[0,0,0],zoom:r=0,minRotationX:s=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:c=1/0,startPanPosition:p,startRotatePos:h,startRotationX:m,startRotationOrbit:u,startZoomPosition:g,startZoom:x}=t;super({width:e,height:o,rotationX:i,rotationOrbit:n,target:a,zoom:r,minRotationX:s,maxRotationX:l,minZoom:d,maxZoom:c},{startPanPosition:p,startRotatePos:h,startRotationX:m,startRotationOrbit:u,startZoomPosition:g,startZoom:x}),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:e}){const o=this.getState().startPanPosition||e;if(!o)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(o,t);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:o=0}){const{startRotatePos:i,startRotationX:n,startRotationOrbit:a}=this.getState(),{width:r,height:s}=this.getViewportProps();if(!i||void 0===n||void 0===a)return this;let l;if(t){let e=(t[0]-i[0])/r;(n<-90||n>90)&&(e*=-1),l={rotationX:n+180*((t[1]-i[1])/s),rotationOrbit:a+180*e}}else l={rotationX:n+o,rotationOrbit:a+e};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const e=t.getViewportProps(),o={...this.getViewportProps()},{rotationOrbit:i}=o;return Math.abs(i-e.rotationOrbit)>180&&(o.rotationOrbit=i<0?i+360:i-360),o}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:o}){let{startZoom:i,startZoomPosition:n}=this.getState();if(n||(i=this.getViewportProps().zoom,n=this._unproject(e)||this._unproject(t)),!n)return this;const a=this._calculateNewZoom({scale:o,startZoom:i}),r=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...r.panByPosition(n,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_calculateNewZoom({scale:t,startZoom:e}){const{maxZoom:o,minZoom:i}=this.getViewportProps();void 0===e&&(e=this.getViewportProps().zoom);const n=e+Math.log2(t);return(0,r.qE)(n,i,o)}_panFromCenter(t){const{width:e,height:o,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[e/2+t[0],o/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:e,minZoom:o,zoom:i,maxRotationX:n,minRotationX:a,rotationOrbit:s}=t;return t.zoom=Array.isArray(i)?[(0,r.qE)(i[0],o,e),(0,r.qE)(i[1],o,e)]:(0,r.qE)(i,o,e),t.rotationX=(0,r.qE)(t.rotationX,a,n),(s<-180||s>180)&&(t.rotationOrbit=(0,u.zi)(s+180,360)-180),t}}h.A;class y extends x{constructor(t){super(t),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:e}){const{maxZoom:o,minZoom:i}=this.getViewportProps();void 0===e&&(e=this.getViewportProps().zoom);let n=Math.log2(t);if(Array.isArray(e)){let[t,a]=e;switch(this.zoomAxis){case"X":t=(0,r.qE)(t+n,i,o);break;case"Y":a=(0,r.qE)(a+n,i,o);break;default:let e=Math.min(t+n,a+n);e<i&&(n+=i-e),e=Math.max(t+n,a+n),e>o&&(n+=o-e),t+=n,a+=n}return[t,a]}return(0,r.qE)(e+n,i,o)}}class v extends h.A{constructor(){super(...arguments),this.ControllerState=y,this.transition={transitionDuration:300,transitionInterpolator:new g.A(["target","zoom"])},this.dragMode="pan"}_onPanRotate(){return!1}}class f extends i.A{constructor(t={}){super(t)}getViewportType(){return p}get ControllerType(){return v}}f.displayName="OrthographicView";const b=f}}]);